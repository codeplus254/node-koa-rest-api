{
  "{\"sourceRoot\":\"/home/master/challenge-rest-api/src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/master/challenge-rest-api\",\"filename\":\"/home/master/challenge-rest-api/src/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/master/challenge-rest-api\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/master/challenge-rest-api",
      "filename": "/home/master/challenge-rest-api/src/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/master/challenge-rest-api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/master/challenge-rest-api/src/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/master/challenge-rest-api/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/master/challenge-rest-api/src",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _koa = _interopRequireDefault(require(\"koa\"));\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _koaBodyparser = _interopRequireDefault(require(\"koa-bodyparser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = new _koa.default();\nconst PORT = process.env.PORT || 1337;\nconst router = new _koaRouter.default();\n\nconst API = require(\"./controller\");\n\nrouter.use((0, _koaBodyparser.default)()).get('/', (ctx, next) => {\n  ctx.body = 'hello, welcome to the Polycade API';\n}).get('/pricing-models', async (ctx, next) => {\n  const pricingModels = await new API().getPricingModels();\n  ctx.body = pricingModels;\n}).post('/pricing-models', async (ctx, next) => {\n  const pricingModel = ctx.request.body;\n\n  try {\n    const response = await new API().createPricingModel(pricingModel);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).get('/pricing-models/:pricingModelID', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const pricingModel = await new API().getPricingModel(pricingModelID);\n    ctx.body = pricingModel;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).put('/pricing-models/:pricingModelID', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n  const pricingModelChanges = ctx.request.body;\n\n  try {\n    const pricingModel = await new API().updatePricingModel(pricingModelID, pricingModelChanges);\n    ctx.body = pricingModel;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).get('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const prices = await new API().getPricesForPricingModel(pricingModelID);\n    ctx.body = prices;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).post('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n  const newPrice = ctx.request.body;\n\n  try {\n    const response = await new API().createPricingForPricingModel(pricingModelID, newPrice);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).del('/pricing-models/:pricingModelID/prices/:priceID', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n  const pricingID = ctx.params.priceID;\n\n  try {\n    const response = await new API().deletePricingFromPricingModel(pricingModelID, pricingID);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).get('/machines/:machineID', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n\n  try {\n    const response = await new API().getMachine(machineID);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).put('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const response = await new API().setPricingForMachine(machineID, pricingModelID);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).del('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const response = await new API().unsetPricingForMachine(machineID, pricingModelID);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n}).get('/machines/:machineID/prices', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n\n  try {\n    const response = await new API().getPricingModelForMachine(machineID);\n    ctx.body = response;\n  } catch (err) {\n    ctx.body = err;\n  }\n});\napp.use(router.routes()).listen(PORT, () => console.log(`Server listening on port ${PORT}`));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwcCIsIktvYSIsIlBPUlQiLCJwcm9jZXNzIiwiZW52Iiwicm91dGVyIiwiUm91dGVyIiwiQVBJIiwicmVxdWlyZSIsInVzZSIsImdldCIsImN0eCIsIm5leHQiLCJib2R5IiwicHJpY2luZ01vZGVscyIsImdldFByaWNpbmdNb2RlbHMiLCJwb3N0IiwicHJpY2luZ01vZGVsIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiY3JlYXRlUHJpY2luZ01vZGVsIiwiZXJyIiwicHJpY2luZ01vZGVsSUQiLCJwYXJhbXMiLCJnZXRQcmljaW5nTW9kZWwiLCJwdXQiLCJwcmljaW5nTW9kZWxDaGFuZ2VzIiwidXBkYXRlUHJpY2luZ01vZGVsIiwicHJpY2VzIiwiZ2V0UHJpY2VzRm9yUHJpY2luZ01vZGVsIiwibmV3UHJpY2UiLCJjcmVhdGVQcmljaW5nRm9yUHJpY2luZ01vZGVsIiwiZGVsIiwicHJpY2luZ0lEIiwicHJpY2VJRCIsImRlbGV0ZVByaWNpbmdGcm9tUHJpY2luZ01vZGVsIiwibWFjaGluZUlEIiwiZ2V0TWFjaGluZSIsInNldFByaWNpbmdGb3JNYWNoaW5lIiwidW5zZXRQcmljaW5nRm9yTWFjaGluZSIsImdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUiLCJyb3V0ZXMiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsR0FBRyxHQUFHLElBQUlDLFlBQUosRUFBWjtBQUNBLE1BQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVlGLElBQVosSUFBb0IsSUFBakM7QUFDQSxNQUFNRyxNQUFNLEdBQUcsSUFBSUMsa0JBQUosRUFBZjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxjQUFELENBQW5COztBQUVBSCxNQUFNLENBQ0hJLEdBREgsQ0FDTyw2QkFEUCxFQUVHQyxHQUZILENBRU8sR0FGUCxFQUVZLENBQUNDLEdB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dkI7QUFDQXpCLElBQUFBLEdBQUcsQ0FBQ0UsSUFBSixHQUFXTSxRQUFYO0FBQ0QsR0FIRCxDQUdFLE9BQU9FLEdBQVAsRUFBWTtBQUNaVixJQUFBQSxHQUFHLENBQUNFLElBQUosR0FBV1EsR0FBWDtBQUNEO0FBQ0YsQ0F4R0g7QUEyR0FyQixHQUFHLENBQ0FTLEdBREgsQ0FDT0osTUFBTSxDQUFDb0MsTUFBUCxFQURQLEVBRUdDLE1BRkgsQ0FFVXhDLElBRlYsRUFFZ0IsTUFDWnlDLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLDRCQUEyQjFDLElBQUssRUFBN0MsQ0FISiIsInNvdXJjZVJvb3QiOiIvaG9tZS9tYXN0ZXIvY2hhbGxlbmdlLXJlc3QtYXBpL3NyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBLb2EgZnJvbSAna29hJ1xuaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJ1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAna29hLWJvZHlwYXJzZXInXG5cbmNvbnN0IGFwcCA9IG5ldyBLb2EoKVxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMTMzN1xuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5jb25zdCBBUEkgPSByZXF1aXJlKFwiLi9jb250cm9sbGVyXCIpO1xuXG5yb3V0ZXJcbiAgLnVzZShib2R5UGFyc2VyKCkpXG4gIC5nZXQoJy8nLCAoY3R4LCBuZXh0KSA9PiB7XG4gICAgY3R4LmJvZHkgPSAnaGVsbG8sIHdlbGNvbWUgdG8gdGhlIFBvbHljYWRlIEFQSSdcbiAgfSlcbiAgLmdldCgnL3ByaWNpbmctbW9kZWxzJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgIFxuICAgIGNvbnN0IHByaWNpbmdNb2RlbHMgPSBhd2FpdCBuZXcgQVBJKCkuZ2V0UHJpY2luZ01vZGVscygpO1xuICAgIGN0eC5ib2R5ID0gcHJpY2luZ01vZGVscztcbiAgfSlcbiAgLnBvc3QoJy9wcmljaW5nLW1vZGVscycsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICBjb25zdCBwcmljaW5nTW9kZWwgPSBjdHgucmVxdWVzdC5ib2R5O1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldyBBUEkoKS5jcmVhdGVQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsKTtcbiAgICAgIGN0eC5ib2R5ID0gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjdHguYm9keSA9IGVycjtcbiAgICB9XG4gIH0pXG4gIC5nZXQoJy9wcmljaW5nLW1vZGVscy86cHJpY2luZ01vZGVsSUQnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgY29uc3QgcHJpY2luZ01vZGVsSUQgPSBjdHgucGFyYW1zLnByaWNpbmdNb2RlbElEO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmljaW5nTW9kZWwgPSBhd2FpdCBuZXcgQVBJKCkuZ2V0UHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElEKTtcbiAgICAgIGN0eC5ib2R5ID0gcHJpY2luZ01vZGVsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY3R4LmJvZHkgPSBlcnI7XG4gICAgfVxuICB9KVxuICAucHV0KCcvcHJpY2luZy1tb2RlbHMvOnByaWNpbmdNb2RlbElEJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHByaWNpbmdNb2RlbElEID0gY3R4LnBhcmFtcy5wcmljaW5nTW9kZWxJRDtcbiAgICBjb25zdCBwcmljaW5nTW9kZWxDaGFuZ2VzID0gY3R4LnJlcXVlc3QuYm9keTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJpY2luZ01vZGVsID0gYXdhaXQgbmV3IEFQSSgpLnVwZGF0ZVByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCwgcHJpY2luZ01vZGVsQ2hhbmdlcyk7XG4gICAgICBjdHguYm9keSA9IHByaWNpbmdNb2RlbDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGN0eC5ib2R5ID0gZXJyO1xuICAgIH1cbiAgfSlcbiAgLmdldCgnL3ByaWNpbmctbW9kZWxzLzpwcmljaW5nTW9kZWxJRC9wcmljZXMnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgY29uc3QgcHJpY2luZ01vZGVsSUQgPSBjdHgucGFyYW1zLnByaWNpbmdNb2RlbElEO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwcmljZXMgPSBhd2FpdCBuZXcgQVBJKCkuZ2V0UHJpY2VzRm9yUHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElEKTtcbiAgICAgIGN0eC5ib2R5ID0gcHJpY2VzO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY3R4LmJvZHkgPSBlcnI7XG4gICAgfVxuICB9KVxuICAucG9zdCgnL3ByaWNpbmctbW9kZWxzLzpwcmljaW5nTW9kZWxJRC9wcmljZXMnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgY29uc3QgcHJpY2luZ01vZGVsSUQgPSBjdHgucGFyYW1zLnByaWNpbmdNb2RlbElEO1xuICAgIGNvbnN0IG5ld1ByaWNlID0gY3R4LnJlcXVlc3QuYm9keTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgQVBJKCkuY3JlYXRlUHJpY2luZ0ZvclByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCwgbmV3UHJpY2UpO1xuICAgICAgY3R4LmJvZHkgPSByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGN0eC5ib2R5ID0gZXJyO1xuICAgIH1cbiAgfSlcbiAgLmRlbCgnL3ByaWNpbmctbW9kZWxzLzpwcmljaW5nTW9kZWxJRC9wcmljZXMvOnByaWNlSUQnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgY29uc3QgcHJpY2luZ01vZGVsSUQgPSBjdHgucGFyYW1zLnByaWNpbmdNb2RlbElEO1xuICAgIGNvbnN0IHByaWNpbmdJRCA9IGN0eC5wYXJhbXMucHJpY2VJRDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgQVBJKCkuZGVsZXRlUHJpY2luZ0Zyb21QcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQsIHByaWNpbmdJRCk7XG4gICAgICBjdHguYm9keSA9IHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY3R4LmJvZHkgPSBlcnI7XG4gICAgfVxuICB9KVxuICAuZ2V0KCcvbWFjaGluZXMvOm1hY2hpbmVJRCcsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICBjb25zdCBtYWNoaW5lSUQgPSBjdHgucGFyYW1zLm1hY2hpbmVJRDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgQVBJKCkuZ2V0TWFjaGluZShtYWNoaW5lSUQpO1xuICAgICAgY3R4LmJvZHkgPSByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGN0eC5ib2R5ID0gZXJyO1xuICAgIH1cbiAgfSlcbiAgLnB1dCgnL21hY2hpbmVzLzptYWNoaW5lSUQvcHJpY2VzLzpwcmljaW5nTW9kZWxJRCcsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICBjb25zdCBtYWNoaW5lSUQgPSBjdHgucGFyYW1zLm1hY2hpbmVJRDtcbiAgICBjb25zdCBwcmljaW5nTW9kZWxJRCA9IGN0eC5wYXJhbXMucHJpY2luZ01vZGVsSUQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IEFQSSgpLnNldFByaWNpbmdGb3JNYWNoaW5lKG1hY2hpbmVJRCwgcHJpY2luZ01vZGVsSUQpO1xuICAgICAgY3R4LmJvZHkgPSByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGN0eC5ib2R5ID0gZXJyO1xuICAgIH1cbiAgfSlcbiAgLmRlbCgnL21hY2hpbmVzLzptYWNoaW5lSUQvcHJpY2VzLzpwcmljaW5nTW9kZWxJRCcsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICBjb25zdCBtYWNoaW5lSUQgPSBjdHgucGFyYW1zLm1hY2hpbmVJRDtcbiAgICBjb25zdCBwcmljaW5nTW9kZWxJRCA9IGN0eC5wYXJhbXMucHJpY2luZ01vZGVsSUQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IEFQSSgpLnVuc2V0UHJpY2luZ0Zvck1hY2hpbmUobWFjaGluZUlELCBwcmljaW5nTW9kZWxJRCk7XG4gICAgICBjdHguYm9keSA9IHJlc3BvbnNlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY3R4LmJvZHkgPSBlcnI7XG4gICAgfVxuICB9KVxuICAuZ2V0KCcvbWFjaGluZXMvOm1hY2hpbmVJRC9wcmljZXMnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgY29uc3QgbWFjaGluZUlEID0gY3R4LnBhcmFtcy5tYWNoaW5lSUQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IEFQSSgpLmdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUobWFjaGluZUlEKTtcbiAgICAgIGN0eC5ib2R5ID0gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjdHguYm9keSA9IGVycjtcbiAgICB9XG4gIH0pXG5cblxuYXBwXG4gIC51c2Uocm91dGVyLnJvdXRlcygpKVxuICAubGlzdGVuKFBPUlQsICgpID0+XG4gICAgY29uc29sZS5sb2coYFNlcnZlciBsaXN0ZW5pbmcgb24gcG9ydCAke1BPUlR9YClcbiAgKVxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "app",
        "Koa",
        "PORT",
        "process",
        "env",
        "router",
        "Router",
        "API",
        "require",
        "use",
        "get",
        "ctx",
        "next",
        "body",
        "pricingModels",
        "getPricingModels",
        "post",
        "pricingModel",
        "request",
        "response",
        "createPricingModel",
        "err",
        "pricingModelID",
        "params",
        "getPricingModel",
        "put",
        "pricingModelChanges",
        "updatePricingModel",
        "prices",
        "getPricesForPricingModel",
        "newPrice",
        "createPricingForPricingModel",
        "del",
        "pricingID",
        "priceID",
        "deletePricingFromPricingModel",
        "machineID",
        "getMachine",
        "setPricingForMachine",
        "unsetPricingForMachine",
        "getPricingModelForMachine",
        "routes",
        "listen",
        "console",
        "log"
      ],
      "mappings": "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",
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "sourcesContent": [
        "import Koa from 'koa'\nimport Router from 'koa-router'\nimport bodyParser from 'koa-bodyparser'\n\nconst app = new Koa()\nconst PORT = process.env.PORT || 1337\nconst router = new Router()\nconst API = require(\"./controller\");\n\nrouter\n  .use(bodyParser())\n  .get('/', (ctx, next) => {\n    ctx.body = 'hello, welcome to the Polycade API'\n  })\n  .get('/pricing-models', async (ctx, next) => {\n    \n    const pricingModels = await new API().getPricingModels();\n    ctx.body = pricingModels;\n  })\n  .post('/pricing-models', async (ctx, next) => {\n    const pricingModel = ctx.request.body;\n    try {\n      const response = await new API().createPricingModel(pricingModel);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .get('/pricing-models/:pricingModelID', async (ctx, next) => {\n    const pricingModelID = ctx.params.pricingModelID;\n    try {\n      const pricingModel = await new API().getPricingModel(pricingModelID);\n      ctx.body = pricingModel;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .put('/pricing-models/:pricingModelID', async (ctx, next) => {\n    const pricingModelID = ctx.params.pricingModelID;\n    const pricingModelChanges = ctx.request.body;\n    try {\n      const pricingModel = await new API().updatePricingModel(pricingModelID, pricingModelChanges);\n      ctx.body = pricingModel;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .get('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n    const pricingModelID = ctx.params.pricingModelID;\n    try {\n      const prices = await new API().getPricesForPricingModel(pricingModelID);\n      ctx.body = prices;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .post('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n    const pricingModelID = ctx.params.pricingModelID;\n    const newPrice = ctx.request.body;\n    try {\n      const response = await new API().createPricingForPricingModel(pricingModelID, newPrice);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .del('/pricing-models/:pricingModelID/prices/:priceID', async (ctx, next) => {\n    const pricingModelID = ctx.params.pricingModelID;\n    const pricingID = ctx.params.priceID;\n    try {\n      const response = await new API().deletePricingFromPricingModel(pricingModelID, pricingID);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .get('/machines/:machineID', async (ctx, next) => {\n    const machineID = ctx.params.machineID;\n    try {\n      const response = await new API().getMachine(machineID);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .put('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n    const machineID = ctx.params.machineID;\n    const pricingModelID = ctx.params.pricingModelID;\n    try {\n      const response = await new API().setPricingForMachine(machineID, pricingModelID);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .del('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n    const machineID = ctx.params.machineID;\n    const pricingModelID = ctx.params.pricingModelID;\n    try {\n      const response = await new API().unsetPricingForMachine(machineID, pricingModelID);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n  .get('/machines/:machineID/prices', async (ctx, next) => {\n    const machineID = ctx.params.machineID;\n    try {\n      const response = await new API().getPricingModelForMachine(machineID);\n      ctx.body = response;\n    } catch (err) {\n      ctx.body = err;\n    }\n  })\n\n\napp\n  .use(router.routes())\n  .listen(PORT, () =>\n    console.log(`Server listening on port ${PORT}`)\n  )\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1635704202686
  },
  "{\"sourceRoot\":\"/home/master/challenge-rest-api/src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/master/challenge-rest-api\",\"filename\":\"/home/master/challenge-rest-api/src/controller.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/master/challenge-rest-api\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/master/challenge-rest-api",
      "filename": "/home/master/challenge-rest-api/src/controller.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/master/challenge-rest-api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/master/challenge-rest-api/src/controller.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/master/challenge-rest-api/src/controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/master/challenge-rest-api/src",
        "sourceFileName": "controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/* eslint-disable camelcase */\n\n/* eslint-disable radix */\n// controller.js\n// Logic behind the functionalities\nconst pricingData = require('./../prices.json');\n\nconst machineData = require('./../machines.json');\n\nconst fs = require('fs');\n\nclass Controller {\n  // getting all price models for the system\n  async getPricingModels() {\n    // return all todos\n    return new Promise((resolve, _) => resolve(pricingData));\n  } // getting an individual pricing model\n\n\n  async getPricingModel(pricingModelID) {\n    return new Promise((resolve, reject) => {\n      // get the pricing model\n      let pricingModel = pricingData[pricingModelID];\n\n      if (pricingModel) {\n        // return the pricing model\n        resolve(pricingModel);\n      } else {\n        // return an error\n        reject(`Pricing Model with id ${pricingModelID} not found `);\n      }\n    });\n  } // getting prices for an individual pricing model\n\n\n  async getPricesForPricingModel(pricingModelID) {\n    return new Promise((resolve, reject) => {\n      // get the todo\n      let pricingModel = pricingData[pricingModelID];\n\n      if (pricingModel) {\n        // return the todo\n        resolve(pricingModel.pricing);\n      } else {\n        // return an error\n        reject(`Pricing Model with id ${pricingModelID}} not found `);\n      }\n    });\n  } // creating a pricing model in the system\n\n\n  async createPricingModel(pricingModel) {\n    return new Promise(async (resolve, reject) => {\n      // Ensure pricing model is complete\n      if (!pricingModel.name) {\n        reject('Missing parameters: name (str)');\n      } else if (!pricingModel.pricing) {\n        reject('Missing parameters: pricing (arr)');\n      } else if (!pricingModel.pricing[0]) {\n        reject('Please at least add one pricing object with the following keys: price (int), name (str), value (int)');\n      }\n\n      for (let [i, pricing] of pricingModel.pricing.entries()) {\n        if (!pricing.price) {\n          reject(`Found an error: price (int) is missing in your pricing object ${i}`);\n        } else if (!pricing.name) {\n          reject(`Found an error: name (str) is missing in your pricing object ${i}`);\n        } else if (!pricing.value) {\n          reject(`Found an error: value (int) is missing in your pricing object ${i}`);\n        }\n      }\n\n      let pricingModelID = Math.floor(4 + Math.random() * 10); // create a pricingModel, with random id and data sent\n\n      let newPricingModel = {\n        id: pricingModelID,\n        ...pricingModel\n      };\n      pricingData[pricingModelID] = newPricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8'); // return the new created todo\n\n        resolve(newPricingModel.id);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // adds a new price configuration for a pricing model\n\n\n  async createPricingForPricingModel(pricingModelID, newPrice) {\n    return new Promise(async (resolve, reject) => {\n      let pricingModel = pricingData[pricingModelID];\n\n      if (!pricingModel) {\n        reject(`No pricing model with id ${pricingModelID} found`);\n      } else if (!newPrice.price) {\n        reject('Found an error: price (int) is missing in your pricing object');\n      } else if (!newPrice.name) {\n        reject('Found an error: name (str) is missing in your pricing object');\n      } else if (!newPrice.value) {\n        reject('Found an error: value (int) is missing in your pricing object');\n      }\n\n      let pricingID = Math.floor(4 + Math.random() * 10); // create a pricingModel, with random id and data sent\n\n      let newPricing = {\n        id: pricingID,\n        ...newPrice\n      }; // Add the pricing object to pricing model\n\n      pricingModel.pricing.push(newPricing);\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8'); // return the pricing model\n\n        await resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // updating a pricing model\n\n\n  async updatePricingModel(pricingModelID, pricingModelChanges) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      let pricingModel = pricingData[pricingModelID]; // if no pricingModel, return an error\n\n      if (!pricingModel) {\n        reject(`No pricing model with id ${pricingModelID} found`);\n      } else if (!pricingModelChanges.name) {\n        reject('Missing parameters: name (str)');\n      } // pricing model only contains name as meta data\n\n\n      pricingModel.name = pricingModelChanges.name;\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n        resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // removes a price configuration from a pricing model\n\n\n  async deletePricingFromPricingModel(pricingModelID, pricingID) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      let pricingModel = pricingData[pricingModelID]; // if no pricingModel, return an error\n\n      if (!pricingModel) {\n        reject(`No pricing model with id ${pricingModelID} found`);\n      }\n\n      let pricingToBeDeleted = pricingModel.pricing.find(pricing => pricing.id === parseInt(pricingID));\n\n      if (!pricingToBeDeleted) {\n        reject(`No pricing with id ${pricingID} found`);\n      }\n\n      let pricingArray = pricingModel.pricing.filter(item => item !== pricingToBeDeleted); // else, return a success message\n\n      pricingModel.pricing = pricingArray;\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n        resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // getting an individual pricing model\n\n\n  async getMachine(machineID) {\n    return new Promise((resolve, reject) => {\n      // get the pricing model\n      let machine = machineData[machineID];\n\n      if (machine) {\n        // return the machine\n        resolve(machine);\n      } else {\n        // return an error\n        reject(`Machine with id ${machineID} not found`);\n      }\n    });\n  } // sets/updates the pricing model for an individual machine\n\n\n  async setPricingForMachine(machineID, pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      let machine = this.getMachine(machineID); // if no machine, return an error\n\n      if (!machine) {\n        reject(`No machine with id ${machineID} found`);\n      }\n\n      let pricingModel = this.getPricingModel(pricingModelID); // if no pricing, return an error\n\n      if (!pricingModel) {\n        reject(`No pricing model with id ${pricingModelID} found`);\n      } // else, update it by setting completed to true\n      // eslint-disable-next-line camelcase\n\n\n      machine.pricing_id = pricingModelID;\n      machineData[machineID] = machine;\n\n      try {\n        await fs.writeFileSync('./../machine.json', machineData, 'utf8');\n        resolve(machine);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // removes the pricing model from the machine (unsets it)\n\n\n  async unsetPricingForMachine(machineID, pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      // get the machine\n      let machine = this.getMachine(machineID); // if no machine, return an error\n\n      if (!machine) {\n        reject(`No machine with id ${machineID} found`);\n      }\n\n      if (machine.pricing_id === pricingModelID) {\n        machine.pricing_id = '';\n        resolve(machine);\n      } else {\n        reject(`No pricing model with id ${pricingModelID} found for machine with id ${machineID}`);\n      }\n\n      machineData[machineID] = machine;\n\n      try {\n        await fs.writeFileSync('./../machine.json', machineData, 'utf8');\n        resolve(machine);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // get the pricing model and price configurations set for a given machine\n\n\n  async getPricingModelForMachine(machineID) {\n    return new Promise((resolve, reject) => {\n      // get the machine\n      let machine = this.getMachine(machineID); // if no machine, return an error\n\n      if (!machine) {\n        reject(`No machine with id ${machineID} found`);\n      }\n\n      let pricingModelID = machine.pricing_id;\n      let pricingModel;\n\n      if (!pricingModelID || pricingModelID === '') {\n        // default pricing\n        pricingModel = pricingData.default_pricing;\n      } else {\n        pricingModel = pricingData[pricingModelID];\n      } // return the pricing model\n\n\n      resolve(pricingModel);\n    });\n  }\n\n}\n\nmodule.exports = Controller;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsicHJpY2luZ0RhdGEiLCJyZXF1aXJlIiwibWFjaGluZURhdGEiLCJmcyIsIkNvbnRyb2xsZXIiLCJnZXRQcmljaW5nTW9kZWxzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJfIiwiZ2V0UHJpY2luZ01vZGVsIiwicHJpY2luZ01vZGVsSUQiLCJyZWplY3QiLCJwcmljaW5nTW9kZWwiLCJnZXRQcmljZXNGb3JQcmljaW5nTW9kZWwiLCJwcmljaW5nIiwiY3JlYXRlUHJpY2luZ01vZGVsIiwibmFtZSIsImkiLCJlbnRyaWVzIiwicHJpY2UiLCJ2YWx1ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm5ld1ByaWNpbmdNb2RlbCIsImlkIiwid3JpdGVGaWxlU3luYyIsImVyciIsImNyZWF0ZVByaWNpbmdGb3JQcmljaW5nTW9kZWwiLCJuZXdQcmljZSIsInByaWNpbmdJRCIsIm5ld1ByaWNpbmciLCJwdXNoIiwidXBkYXRlUHJpY2luZ01vZGVsIiwicHJpY2luZ01vZGVsQ2hhbmdlcyIsImRlbGV0ZVByaWNpbmdGcm9tUHJpY2luZ01vZGVsIiwicHJpY2luZ1RvQmVEZWxldGVkIiwiZmluZCIsInBhcnNlSW50IiwicHJpY2luZ0FycmF5IiwiZmlsdGVyIiwiaXRlbSIsImdldE1hY2hpbmUiLCJtYWNoaW5lSUQiLCJtYWNoaW5lIiwic2V0UHJpY2luZ0Zvck1hY2hpbmUiLCJwcmljaW5nX2lkIiwidW5zZXRQcmljaW5nRm9yTWFjaGluZSIsImdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUiLCJkZWZhdWx0X3ByaWNpbmciLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGtCQUFELENBQTNCOztBQUNBLE1BQU1DLFdBQVcsR0FBR0QsT0FBTyxDQUFDLG9CQUFELENBQTNCOztBQUNBLE1BQU1FLEVBQUUsR0FBR0Ys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QUFBQSxNQUFNLENBQUNnQixHQUFELENBQU47QUFDQTtBQUNELEtBcEJNLENBQVA7QUFxQkEsR0E3TmUsQ0E4TmhCOzs7QUFDQSxRQUFNcUIseUJBQU4sQ0FBaUNMLFNBQWpDLEVBQTRDO0FBQzNDLFdBQU8sSUFBSXJDLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVJLE1BQVYsS0FBcUI7QUFDdkM7QUFDQSxVQUFJaUMsT0FBTyxHQUFHLEtBQUtGLFVBQUwsQ0FBZ0JDLFNBQWhCLENBQWQsQ0FGdUMsQ0FHdkM7O0FBQ0EsVUFBSSxDQUFDQyxPQUFMLEVBQWM7QUFDYmpDLFFBQUFBLE1BQU0sQ0FBRSxzQkFBcUJnQyxTQUFVLFFBQWpDLENBQU47QUFDQTs7QUFDRCxVQUFJakMsY0FBYyxHQUFHa0MsT0FBTyxDQUFDRSxVQUE3QjtBQUNBLFVBQUlsQyxZQUFKOztBQUNBLFVBQUksQ0FBQ0YsY0FBRCxJQUFtQkEsY0FBYyxLQUFLLEVBQTFDLEVBQThDO0FBQzdDO0FBQ0FFLFFBQUFBLFlBQVksR0FBR1osV0FBVyxDQUFDaUQsZUFBM0I7QUFFQSxPQUpELE1BSU87QUFDTnJDLFFBQUFBLFlBQVksR0FBR1osV0FBVyxDQUFDVSxjQUFELENBQTFCO0FBQ0EsT0Fmc0MsQ0FnQnZDOzs7QUFDQUgsTUFBQUEsT0FBTyxDQUFDSyxZQUFELENBQVA7QUFDQSxLQWxCTSxDQUFQO0FBbUJBOztBQW5QZTs7QUFxUGpCc0MsTUFBTSxDQUFDQyxPQUFQLEdBQWlCL0MsVUFBakIiLCJzb3VyY2VSb290IjoiL2hvbWUvbWFzdGVyL2NoYWxsZW5nZS1yZXN0LWFwaS9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJhZGl4ICovXG4vLyBjb250cm9sbGVyLmpzXG4vLyBMb2dpYyBiZWhpbmQgdGhlIGZ1bmN0aW9uYWxpdGllc1xuY29uc3QgcHJpY2luZ0RhdGEgPSByZXF1aXJlKCcuLy4uL3ByaWNlcy5qc29uJyk7XG5jb25zdCBtYWNoaW5lRGF0YSA9IHJlcXVpcmUoJy4vLi4vbWFjaGluZXMuanNvbicpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5jbGFzcyBDb250cm9sbGVyIHtcblx0Ly8gZ2V0dGluZyBhbGwgcHJpY2UgbW9kZWxzIGZvciB0aGUgc3lzdGVtXG5cdGFzeW5jIGdldFByaWNpbmdNb2RlbHMgKCkge1xuXHRcdC8vIHJldHVybiBhbGwgdG9kb3Ncblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF8pID0+IHJlc29sdmUocHJpY2luZ0RhdGEpKTtcblx0fVxuXG5cdC8vIGdldHRpbmcgYW4gaW5kaXZpZHVhbCBwcmljaW5nIG1vZGVsXG5cdGFzeW5jIGdldFByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nIG1vZGVsXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsID0gcHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdO1xuXHRcdFx0aWYgKHByaWNpbmdNb2RlbCkge1xuXHRcdFx0XHQvLyByZXR1cm4gdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdFx0cmVzb2x2ZShwcmljaW5nTW9kZWwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gcmV0dXJuIGFuIGVycm9yXG5cdFx0XHRcdHJlamVjdChgUHJpY2luZyBNb2RlbCB3aXRoIGlkICR7cHJpY2luZ01vZGVsSUR9IG5vdCBmb3VuZCBgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIGdldHRpbmcgcHJpY2VzIGZvciBhbiBpbmRpdmlkdWFsIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgZ2V0UHJpY2VzRm9yUHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWxJRCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHQvLyBnZXQgdGhlIHRvZG9cblx0XHRcdGxldCBwcmljaW5nTW9kZWwgPSBwcmljaW5nRGF0YVtwcmljaW5nTW9kZWxJRF07XG5cdFx0XHRpZiAocHJpY2luZ01vZGVsKSB7XG5cdFx0XHRcdC8vIHJldHVybiB0aGUgdG9kb1xuXHRcdFx0XHRyZXNvbHZlKHByaWNpbmdNb2RlbC5wcmljaW5nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHJldHVybiBhbiBlcnJvclxuXHRcdFx0XHRyZWplY3QoYFByaWNpbmcgTW9kZWwgd2l0aCBpZCAke3ByaWNpbmdNb2RlbElEfX0gbm90IGZvdW5kIGApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gY3JlYXRpbmcgYSBwcmljaW5nIG1vZGVsIGluIHRoZSBzeXN0ZW1cblx0YXN5bmMgY3JlYXRlUHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWwpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gRW5zdXJlIHByaWNpbmcgbW9kZWwgaXMgY29tcGxldGVcblx0XHRcdGlmICghcHJpY2luZ01vZGVsLm5hbWUpIHtcblx0XHRcdFx0cmVqZWN0KCdNaXNzaW5nIHBhcmFtZXRlcnM6IG5hbWUgKHN0ciknKTtcblx0XHRcdH0gZWxzZSBpZiAoIXByaWNpbmdNb2RlbC5wcmljaW5nKSB7XG5cdFx0XHRcdHJlamVjdCgnTWlzc2luZyBwYXJhbWV0ZXJzOiBwcmljaW5nIChhcnIpJyk7XG5cdFx0XHR9IGVsc2UgaWYgKCFwcmljaW5nTW9kZWwucHJpY2luZ1swXSkge1xuXHRcdFx0XHRyZWplY3QoJ1BsZWFzZSBhdCBsZWFzdCBhZGQgb25lIHByaWNpbmcgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBrZXlzOiBwcmljZSAoaW50KSwgbmFtZSAoc3RyKSwgdmFsdWUgKGludCknKTtcblx0XHRcdH1cblx0XHRcdGZvciAobGV0IFtpLCBwcmljaW5nXSBvZiBwcmljaW5nTW9kZWwucHJpY2luZy5lbnRyaWVzKCkpIHtcblx0XHRcdFx0aWYgKCFwcmljaW5nLnByaWNlKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGBGb3VuZCBhbiBlcnJvcjogcHJpY2UgKGludCkgaXMgbWlzc2luZyBpbiB5b3VyIHByaWNpbmcgb2JqZWN0ICR7aX1gKTtcblx0XHRcdFx0fSBlbHNlIGlmICghcHJpY2luZy5uYW1lKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGBGb3VuZCBhbiBlcnJvcjogbmFtZSAoc3RyKSBpcyBtaXNzaW5nIGluIHlvdXIgcHJpY2luZyBvYmplY3QgJHtpfWApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFwcmljaW5nLnZhbHVlKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGBGb3VuZCBhbiBlcnJvcjogdmFsdWUgKGludCkgaXMgbWlzc2luZyBpbiB5b3VyIHByaWNpbmcgb2JqZWN0ICR7aX1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsSUQgPSBNYXRoLmZsb29yKDQgKyBNYXRoLnJhbmRvbSgpICogMTApO1xuXHRcdFx0Ly8gY3JlYXRlIGEgcHJpY2luZ01vZGVsLCB3aXRoIHJhbmRvbSBpZCBhbmQgZGF0YSBzZW50XG5cdFx0XHRsZXQgbmV3UHJpY2luZ01vZGVsID0ge1xuXHRcdFx0XHRpZDogcHJpY2luZ01vZGVsSUQsXG5cdFx0XHRcdC4uLnByaWNpbmdNb2RlbFxuXHRcdFx0fTtcblx0XHRcdHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IG5ld1ByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0Ly8gcmV0dXJuIHRoZSBuZXcgY3JlYXRlZCB0b2RvXG5cdFx0XHQgICAgcmVzb2x2ZShuZXdQcmljaW5nTW9kZWwuaWQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gYWRkcyBhIG5ldyBwcmljZSBjb25maWd1cmF0aW9uIGZvciBhIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgY3JlYXRlUHJpY2luZ0ZvclByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQsIG5ld1ByaWNlKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCBhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsID0gcHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdO1xuXHRcdFx0aWYgKCFwcmljaW5nTW9kZWwpIHtcblx0XHRcdFx0cmVqZWN0KGBObyBwcmljaW5nIG1vZGVsIHdpdGggaWQgJHtwcmljaW5nTW9kZWxJRH0gZm91bmRgKTtcblx0XHRcdH0gZWxzZSBpZiAoIW5ld1ByaWNlLnByaWNlKSB7XG5cdFx0XHRcdHJlamVjdCgnRm91bmQgYW4gZXJyb3I6IHByaWNlIChpbnQpIGlzIG1pc3NpbmcgaW4geW91ciBwcmljaW5nIG9iamVjdCcpO1xuXHRcdFx0fSBlbHNlIGlmICghbmV3UHJpY2UubmFtZSkge1xuXHRcdFx0XHRyZWplY3QoJ0ZvdW5kIGFuIGVycm9yOiBuYW1lIChzdHIpIGlzIG1pc3NpbmcgaW4geW91ciBwcmljaW5nIG9iamVjdCcpO1xuXHRcdFx0fSBlbHNlIGlmICghbmV3UHJpY2UudmFsdWUpIHtcblx0XHRcdFx0cmVqZWN0KCdGb3VuZCBhbiBlcnJvcjogdmFsdWUgKGludCkgaXMgbWlzc2luZyBpbiB5b3VyIHByaWNpbmcgb2JqZWN0Jyk7XG5cdFx0XHR9XG4gICAgICAgICAgICBsZXQgcHJpY2luZ0lEID0gTWF0aC5mbG9vcig0ICsgTWF0aC5yYW5kb20oKSAqIDEwKTtcblx0XHRcdC8vIGNyZWF0ZSBhIHByaWNpbmdNb2RlbCwgd2l0aCByYW5kb20gaWQgYW5kIGRhdGEgc2VudFxuXHRcdFx0bGV0IG5ld1ByaWNpbmcgPSB7XG5cdFx0XHRcdGlkOiBwcmljaW5nSUQsXG5cdFx0XHRcdC4uLm5ld1ByaWNlXG5cdFx0XHR9O1xuXHRcdFx0Ly8gQWRkIHRoZSBwcmljaW5nIG9iamVjdCB0byBwcmljaW5nIG1vZGVsXG5cdFx0XHRwcmljaW5nTW9kZWwucHJpY2luZy5wdXNoKG5ld1ByaWNpbmcpO1xuXHRcdFx0cHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdID0gcHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgZnMud3JpdGVGaWxlU3luYygnLi8uLi9wcmljZXMuanNvbicsIHByaWNpbmdEYXRhLCAndXRmOCcpO1xuXHRcdFx0XHQvLyByZXR1cm4gdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdCAgICBhd2FpdCByZXNvbHZlKHByaWNpbmdNb2RlbCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyB1cGRhdGluZyBhIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgdXBkYXRlUHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWxJRCwgcHJpY2luZ01vZGVsQ2hhbmdlcykge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nTW9kZWxcblx0XHRcdGxldCBwcmljaW5nTW9kZWwgPSBwcmljaW5nRGF0YVtwcmljaW5nTW9kZWxJRF07XG5cdFx0XHQvLyBpZiBubyBwcmljaW5nTW9kZWwsIHJldHVybiBhbiBlcnJvclxuXHRcdFx0aWYgKCFwcmljaW5nTW9kZWwpIHtcblx0XHRcdFx0cmVqZWN0KGBObyBwcmljaW5nIG1vZGVsIHdpdGggaWQgJHtwcmljaW5nTW9kZWxJRH0gZm91bmRgKTtcblx0XHRcdH0gZWxzZSBpZiAoIXByaWNpbmdNb2RlbENoYW5nZXMubmFtZSkge1xuXHRcdFx0XHRyZWplY3QoJ01pc3NpbmcgcGFyYW1ldGVyczogbmFtZSAoc3RyKScpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gcHJpY2luZyBtb2RlbCBvbmx5IGNvbnRhaW5zIG5hbWUgYXMgbWV0YSBkYXRhXG5cdFx0XHRwcmljaW5nTW9kZWwubmFtZSA9IHByaWNpbmdNb2RlbENoYW5nZXMubmFtZTtcblx0XHRcdHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IHByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0cmVzb2x2ZShwcmljaW5nTW9kZWwpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gcmVtb3ZlcyBhIHByaWNlIGNvbmZpZ3VyYXRpb24gZnJvbSBhIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgZGVsZXRlUHJpY2luZ0Zyb21QcmljaW5nTW9kZWwgKHByaWNpbmdNb2RlbElELCBwcmljaW5nSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZ01vZGVsXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsID0gcHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdO1xuXHRcdFx0Ly8gaWYgbm8gcHJpY2luZ01vZGVsLCByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdGlmICghcHJpY2luZ01vZGVsKSB7XG5cdFx0XHRcdHJlamVjdChgTm8gcHJpY2luZyBtb2RlbCB3aXRoIGlkICR7cHJpY2luZ01vZGVsSUR9IGZvdW5kYCk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHJpY2luZ1RvQmVEZWxldGVkID0gcHJpY2luZ01vZGVsLnByaWNpbmcuZmluZCgocHJpY2luZykgPT4gcHJpY2luZy5pZCA9PT0gcGFyc2VJbnQocHJpY2luZ0lEKSk7XG5cdFx0XHRpZiAoIXByaWNpbmdUb0JlRGVsZXRlZCkge1xuXHRcdFx0XHRyZWplY3QoYE5vIHByaWNpbmcgd2l0aCBpZCAke3ByaWNpbmdJRH0gZm91bmRgKTtcblx0XHRcdH1cblx0XHRcdGxldCBwcmljaW5nQXJyYXkgPSBwcmljaW5nTW9kZWwucHJpY2luZy5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBwcmljaW5nVG9CZURlbGV0ZWQpO1xuXHRcdFx0Ly8gZWxzZSwgcmV0dXJuIGEgc3VjY2VzcyBtZXNzYWdlXG5cdFx0XHRwcmljaW5nTW9kZWwucHJpY2luZyA9IHByaWNpbmdBcnJheTtcbiAgICAgICAgICAgIHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IHByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0cmVzb2x2ZShwcmljaW5nTW9kZWwpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cbiAgICAvLyBnZXR0aW5nIGFuIGluZGl2aWR1YWwgcHJpY2luZyBtb2RlbFxuXHRhc3luYyBnZXRNYWNoaW5lIChtYWNoaW5lSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nIG1vZGVsXG5cdFx0XHRsZXQgbWFjaGluZSA9IG1hY2hpbmVEYXRhW21hY2hpbmVJRF07XG5cdFx0XHRpZiAobWFjaGluZSkge1xuXHRcdFx0XHQvLyByZXR1cm4gdGhlIG1hY2hpbmVcblx0XHRcdFx0cmVzb2x2ZShtYWNoaW5lKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHJldHVybiBhbiBlcnJvclxuXHRcdFx0XHRyZWplY3QoYE1hY2hpbmUgd2l0aCBpZCAke21hY2hpbmVJRH0gbm90IGZvdW5kYCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBzZXRzL3VwZGF0ZXMgdGhlIHByaWNpbmcgbW9kZWwgZm9yIGFuIGluZGl2aWR1YWwgbWFjaGluZVxuXHRhc3luYyBzZXRQcmljaW5nRm9yTWFjaGluZSAobWFjaGluZUlELCBwcmljaW5nTW9kZWxJRCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nTW9kZWxcblx0XHRcdGxldCBtYWNoaW5lID0gdGhpcy5nZXRNYWNoaW5lKG1hY2hpbmVJRCk7XG5cdFx0XHQvLyBpZiBubyBtYWNoaW5lLCByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdGlmICghbWFjaGluZSkge1xuXHRcdFx0XHRyZWplY3QoYE5vIG1hY2hpbmUgd2l0aCBpZCAke21hY2hpbmVJRH0gZm91bmRgKTtcblx0XHRcdH1cblx0XHRcdGxldCBwcmljaW5nTW9kZWwgPSB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHQvLyBpZiBubyBwcmljaW5nLCByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdGlmICghcHJpY2luZ01vZGVsKSB7XG5cdFx0XHRcdHJlamVjdChgTm8gcHJpY2luZyBtb2RlbCB3aXRoIGlkICR7cHJpY2luZ01vZGVsSUR9IGZvdW5kYCk7XG5cdFx0XHR9XG5cdFx0XHQvLyBlbHNlLCB1cGRhdGUgaXQgYnkgc2V0dGluZyBjb21wbGV0ZWQgdG8gdHJ1ZVxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuXHRcdFx0bWFjaGluZS5wcmljaW5nX2lkID0gcHJpY2luZ01vZGVsSUQ7XG5cdFx0XHRtYWNoaW5lRGF0YVttYWNoaW5lSURdID0gbWFjaGluZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vbWFjaGluZS5qc29uJywgbWFjaGluZURhdGEsICd1dGY4Jyk7XG5cdFx0XHRcdHJlc29sdmUobWFjaGluZSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyByZW1vdmVzIHRoZSBwcmljaW5nIG1vZGVsIGZyb20gdGhlIG1hY2hpbmUgKHVuc2V0cyBpdClcblx0YXN5bmMgdW5zZXRQcmljaW5nRm9yTWFjaGluZSAobWFjaGluZUlELCBwcmljaW5nTW9kZWxJRCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHRsZXQgbWFjaGluZSA9IHRoaXMuZ2V0TWFjaGluZShtYWNoaW5lSUQpO1xuXHRcdFx0Ly8gaWYgbm8gbWFjaGluZSwgcmV0dXJuIGFuIGVycm9yXG5cdFx0XHRpZiAoIW1hY2hpbmUpIHtcblx0XHRcdFx0cmVqZWN0KGBObyBtYWNoaW5lIHdpdGggaWQgJHttYWNoaW5lSUR9IGZvdW5kYCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWFjaGluZS5wcmljaW5nX2lkID09PSBwcmljaW5nTW9kZWxJRCkge1xuXHRcdFx0XHRtYWNoaW5lLnByaWNpbmdfaWQgPSAnJztcblx0XHRcdFx0cmVzb2x2ZShtYWNoaW5lKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlamVjdChgTm8gcHJpY2luZyBtb2RlbCB3aXRoIGlkICR7cHJpY2luZ01vZGVsSUR9IGZvdW5kIGZvciBtYWNoaW5lIHdpdGggaWQgJHttYWNoaW5lSUR9YCk7XG5cdFx0XHR9XG4gICAgICAgICAgICBtYWNoaW5lRGF0YVttYWNoaW5lSURdID0gbWFjaGluZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vbWFjaGluZS5qc29uJywgbWFjaGluZURhdGEsICd1dGY4Jyk7XG5cdFx0XHRcdHJlc29sdmUobWFjaGluZSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0Ly8gZ2V0IHRoZSBwcmljaW5nIG1vZGVsIGFuZCBwcmljZSBjb25maWd1cmF0aW9ucyBzZXQgZm9yIGEgZ2l2ZW4gbWFjaGluZVxuXHRhc3luYyBnZXRQcmljaW5nTW9kZWxGb3JNYWNoaW5lIChtYWNoaW5lSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHRsZXQgbWFjaGluZSA9IHRoaXMuZ2V0TWFjaGluZShtYWNoaW5lSUQpO1xuXHRcdFx0Ly8gaWYgbm8gbWFjaGluZSwgcmV0dXJuIGFuIGVycm9yXG5cdFx0XHRpZiAoIW1hY2hpbmUpIHtcblx0XHRcdFx0cmVqZWN0KGBObyBtYWNoaW5lIHdpdGggaWQgJHttYWNoaW5lSUR9IGZvdW5kYCk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsSUQgPSBtYWNoaW5lLnByaWNpbmdfaWQ7XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0aWYgKCFwcmljaW5nTW9kZWxJRCB8fCBwcmljaW5nTW9kZWxJRCA9PT0gJycpIHtcblx0XHRcdFx0Ly8gZGVmYXVsdCBwcmljaW5nXG5cdFx0XHRcdHByaWNpbmdNb2RlbCA9IHByaWNpbmdEYXRhLmRlZmF1bHRfcHJpY2luZztcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHJpY2luZ01vZGVsID0gcHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdO1xuXHRcdFx0fVxuXHRcdFx0Ly8gcmV0dXJuIHRoZSBwcmljaW5nIG1vZGVsXG5cdFx0XHRyZXNvbHZlKHByaWNpbmdNb2RlbCk7XG5cdFx0fSk7XG5cdH1cbn1cbm1vZHVsZS5leHBvcnRzID0gQ29udHJvbGxlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "controller.js"
      ],
      "names": [
        "pricingData",
        "require",
        "machineData",
        "fs",
        "Controller",
        "getPricingModels",
        "Promise",
        "resolve",
        "_",
        "getPricingModel",
        "pricingModelID",
        "reject",
        "pricingModel",
        "getPricesForPricingModel",
        "pricing",
        "createPricingModel",
        "name",
        "i",
        "entries",
        "price",
        "value",
        "Math",
        "floor",
        "random",
        "newPricingModel",
        "id",
        "writeFileSync",
        "err",
        "createPricingForPricingModel",
        "newPrice",
        "pricingID",
        "newPricing",
        "push",
        "updatePricingModel",
        "pricingModelChanges",
        "deletePricingFromPricingModel",
        "pricingToBeDeleted",
        "find",
        "parseInt",
        "pricingArray",
        "filter",
        "item",
        "getMachine",
        "machineID",
        "machine",
        "setPricingForMachine",
        "pricing_id",
        "unsetPricingForMachine",
        "getPricingModelForMachine",
        "default_pricing",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "sourcesContent": [
        "/* eslint-disable camelcase */\n/* eslint-disable radix */\n// controller.js\n// Logic behind the functionalities\nconst pricingData = require('./../prices.json');\nconst machineData = require('./../machines.json');\nconst fs = require('fs');\n\nclass Controller {\n\t// getting all price models for the system\n\tasync getPricingModels () {\n\t\t// return all todos\n\t\treturn new Promise((resolve, _) => resolve(pricingData));\n\t}\n\n\t// getting an individual pricing model\n\tasync getPricingModel (pricingModelID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\tlet pricingModel = pricingData[pricingModelID];\n\t\t\tif (pricingModel) {\n\t\t\t\t// return the pricing model\n\t\t\t\tresolve(pricingModel);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Pricing Model with id ${pricingModelID} not found `);\n\t\t\t}\n\t\t});\n\t}\n\n\t// getting prices for an individual pricing model\n\tasync getPricesForPricingModel (pricingModelID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the todo\n\t\t\tlet pricingModel = pricingData[pricingModelID];\n\t\t\tif (pricingModel) {\n\t\t\t\t// return the todo\n\t\t\t\tresolve(pricingModel.pricing);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Pricing Model with id ${pricingModelID}} not found `);\n\t\t\t}\n\t\t});\n\t}\n\n\t// creating a pricing model in the system\n\tasync createPricingModel (pricingModel) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\t// Ensure pricing model is complete\n\t\t\tif (!pricingModel.name) {\n\t\t\t\treject('Missing parameters: name (str)');\n\t\t\t} else if (!pricingModel.pricing) {\n\t\t\t\treject('Missing parameters: pricing (arr)');\n\t\t\t} else if (!pricingModel.pricing[0]) {\n\t\t\t\treject('Please at least add one pricing object with the following keys: price (int), name (str), value (int)');\n\t\t\t}\n\t\t\tfor (let [i, pricing] of pricingModel.pricing.entries()) {\n\t\t\t\tif (!pricing.price) {\n\t\t\t\t\treject(`Found an error: price (int) is missing in your pricing object ${i}`);\n\t\t\t\t} else if (!pricing.name) {\n\t\t\t\t\treject(`Found an error: name (str) is missing in your pricing object ${i}`);\n\t\t\t\t} else if (!pricing.value) {\n\t\t\t\t\treject(`Found an error: value (int) is missing in your pricing object ${i}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet pricingModelID = Math.floor(4 + Math.random() * 10);\n\t\t\t// create a pricingModel, with random id and data sent\n\t\t\tlet newPricingModel = {\n\t\t\t\tid: pricingModelID,\n\t\t\t\t...pricingModel\n\t\t\t};\n\t\t\tpricingData[pricingModelID] = newPricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\t// return the new created todo\n\t\t\t    resolve(newPricingModel.id);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// adds a new price configuration for a pricing model\n\tasync createPricingForPricingModel (pricingModelID, newPrice) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet pricingModel = pricingData[pricingModelID];\n\t\t\tif (!pricingModel) {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found`);\n\t\t\t} else if (!newPrice.price) {\n\t\t\t\treject('Found an error: price (int) is missing in your pricing object');\n\t\t\t} else if (!newPrice.name) {\n\t\t\t\treject('Found an error: name (str) is missing in your pricing object');\n\t\t\t} else if (!newPrice.value) {\n\t\t\t\treject('Found an error: value (int) is missing in your pricing object');\n\t\t\t}\n            let pricingID = Math.floor(4 + Math.random() * 10);\n\t\t\t// create a pricingModel, with random id and data sent\n\t\t\tlet newPricing = {\n\t\t\t\tid: pricingID,\n\t\t\t\t...newPrice\n\t\t\t};\n\t\t\t// Add the pricing object to pricing model\n\t\t\tpricingModel.pricing.push(newPricing);\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\t// return the pricing model\n\t\t\t    await resolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// updating a pricing model\n\tasync updatePricingModel (pricingModelID, pricingModelChanges) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\tlet pricingModel = pricingData[pricingModelID];\n\t\t\t// if no pricingModel, return an error\n\t\t\tif (!pricingModel) {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found`);\n\t\t\t} else if (!pricingModelChanges.name) {\n\t\t\t\treject('Missing parameters: name (str)');\n\t\t\t}\n\t\t\t// pricing model only contains name as meta data\n\t\t\tpricingModel.name = pricingModelChanges.name;\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\tresolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// removes a price configuration from a pricing model\n\tasync deletePricingFromPricingModel (pricingModelID, pricingID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\tlet pricingModel = pricingData[pricingModelID];\n\t\t\t// if no pricingModel, return an error\n\t\t\tif (!pricingModel) {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found`);\n\t\t\t}\n\t\t\tlet pricingToBeDeleted = pricingModel.pricing.find((pricing) => pricing.id === parseInt(pricingID));\n\t\t\tif (!pricingToBeDeleted) {\n\t\t\t\treject(`No pricing with id ${pricingID} found`);\n\t\t\t}\n\t\t\tlet pricingArray = pricingModel.pricing.filter(item => item !== pricingToBeDeleted);\n\t\t\t// else, return a success message\n\t\t\tpricingModel.pricing = pricingArray;\n            pricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\tresolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n    // getting an individual pricing model\n\tasync getMachine (machineID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\tlet machine = machineData[machineID];\n\t\t\tif (machine) {\n\t\t\t\t// return the machine\n\t\t\t\tresolve(machine);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Machine with id ${machineID} not found`);\n\t\t\t}\n\t\t});\n\t}\n\n\t// sets/updates the pricing model for an individual machine\n\tasync setPricingForMachine (machineID, pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\tlet machine = this.getMachine(machineID);\n\t\t\t// if no machine, return an error\n\t\t\tif (!machine) {\n\t\t\t\treject(`No machine with id ${machineID} found`);\n\t\t\t}\n\t\t\tlet pricingModel = this.getPricingModel(pricingModelID);\n\t\t\t// if no pricing, return an error\n\t\t\tif (!pricingModel) {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found`);\n\t\t\t}\n\t\t\t// else, update it by setting completed to true\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tmachine.pricing_id = pricingModelID;\n\t\t\tmachineData[machineID] = machine;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../machine.json', machineData, 'utf8');\n\t\t\t\tresolve(machine);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// removes the pricing model from the machine (unsets it)\n\tasync unsetPricingForMachine (machineID, pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the machine\n\t\t\tlet machine = this.getMachine(machineID);\n\t\t\t// if no machine, return an error\n\t\t\tif (!machine) {\n\t\t\t\treject(`No machine with id ${machineID} found`);\n\t\t\t}\n\t\t\tif (machine.pricing_id === pricingModelID) {\n\t\t\t\tmachine.pricing_id = '';\n\t\t\t\tresolve(machine);\n\t\t\t} else {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found for machine with id ${machineID}`);\n\t\t\t}\n            machineData[machineID] = machine;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../machine.json', machineData, 'utf8');\n\t\t\t\tresolve(machine);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\t// get the pricing model and price configurations set for a given machine\n\tasync getPricingModelForMachine (machineID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the machine\n\t\t\tlet machine = this.getMachine(machineID);\n\t\t\t// if no machine, return an error\n\t\t\tif (!machine) {\n\t\t\t\treject(`No machine with id ${machineID} found`);\n\t\t\t}\n\t\t\tlet pricingModelID = machine.pricing_id;\n\t\t\tlet pricingModel;\n\t\t\tif (!pricingModelID || pricingModelID === '') {\n\t\t\t\t// default pricing\n\t\t\t\tpricingModel = pricingData.default_pricing;\n\n\t\t\t} else {\n\t\t\t\tpricingModel = pricingData[pricingModelID];\n\t\t\t}\n\t\t\t// return the pricing model\n\t\t\tresolve(pricingModel);\n\t\t});\n\t}\n}\nmodule.exports = Controller;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1635704320045
  },
  "{\"sourceRoot\":\"/home/master/challenge-rest-api/src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/master/challenge-rest-api\",\"filename\":\"/home/master/challenge-rest-api/src/controller.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/master/challenge-rest-api\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.8.3": {
    "metadata": {},
    "options": {
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/master/challenge-rest-api",
      "filename": "/home/master/challenge-rest-api/src/controller.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/home/master/challenge-rest-api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/master/challenge-rest-api/src/controller.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/master/challenge-rest-api/src/controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/master/challenge-rest-api/src",
        "sourceFileName": "controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/* eslint-disable camelcase */\n\n/* eslint-disable radix */\n// controller.js\n// Logic behind the functionalities\nconst pricingData = require('./../prices.json');\n\nconst machineData = require('./../machines.json');\n\nconst fs = require('fs');\n\nclass Controller {\n  // getting all price models for the system\n  async getPricingModels() {\n    // return all todos\n    return new Promise((resolve, _) => resolve(pricingData));\n  } // getting an individual pricing model\n\n\n  async getPricingModel(pricingModelID) {\n    return new Promise((resolve, reject) => {\n      // get the pricing model\n      let pricingModel;\n\n      if (pricingModelID) {\n        pricingModel = pricingData[pricingModelID];\n      } else {\n        // no id so default pricing\n        pricingModel = pricingData.default_pricing;\n      }\n\n      if (pricingModel) {\n        // return the pricing model\n        resolve(pricingModel);\n      } else {\n        // return an error\n        reject(`Pricing Model with id ${pricingModelID} not found `);\n      }\n    });\n  } // getting prices for an individual pricing model\n\n\n  async getPricesForPricingModel(pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricing model\n      try {\n        let pricingModel = await this.getPricingModel(pricingModelID);\n        resolve(pricingModel.pricing);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // creating a pricing model in the system\n\n\n  async createPricingModel(pricingModel) {\n    return new Promise(async (resolve, reject) => {\n      // Ensure pricing model is complete\n      if (!pricingModel.name) {\n        reject('Missing parameters: name (str)');\n      } else if (!pricingModel.pricing) {\n        reject('Missing parameters: pricing (arr)');\n      } else if (!pricingModel.pricing[0]) {\n        reject('Please at least add one pricing object with the following keys: price (int), name (str), value (int)');\n      }\n\n      for (let [i, pricing] of pricingModel.pricing.entries()) {\n        if (!pricing.price) {\n          reject(`Found an error: price (int) is missing in your pricing object ${i}`);\n        } else if (!pricing.name) {\n          reject(`Found an error: name (str) is missing in your pricing object ${i}`);\n        } else if (!pricing.value) {\n          reject(`Found an error: value (int) is missing in your pricing object ${i}`);\n        }\n      }\n\n      let pricingModelID = Math.floor(4 + Math.random() * 10); // create a pricingModel, with random id and data sent\n\n      let newPricingModel = {\n        id: pricingModelID,\n        ...pricingModel\n      };\n      pricingData[pricingModelID] = newPricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8'); // return the new created todo\n\n        resolve(newPricingModel.id);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // adds a new price configuration for a pricing model\n\n\n  async createPricingForPricingModel(pricingModelID, newPrice) {\n    return new Promise(async (resolve, reject) => {\n      let pricingModel;\n\n      try {\n        pricingModel = await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      }\n\n      if (!newPrice.price) {\n        reject('Found an error: price (int) is missing in your pricing object');\n      } else if (!newPrice.name) {\n        reject('Found an error: name (str) is missing in your pricing object');\n      } else if (!newPrice.value) {\n        reject('Found an error: value (int) is missing in your pricing object');\n      }\n\n      let pricingID = Math.floor(4 + Math.random() * 10); // create a pricingModel, with random id and data sent\n\n      let newPricing = {\n        id: pricingID,\n        ...newPrice\n      }; // Add the pricing object to pricing model\n\n      pricingModel.pricing.push(newPricing);\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8'); // return the pricing model\n\n        await resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // updating a pricing model\n\n\n  async updatePricingModel(pricingModelID, pricingModelChanges) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      let pricingModel;\n\n      try {\n        pricingModel = await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      } // if no name, return an error\n\n\n      if (!pricingModelChanges.name) {\n        reject('Missing parameters: name (str)');\n      } // pricing model only contains name as meta data\n\n\n      pricingModel.name = pricingModelChanges.name;\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n        resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // removes a price configuration from a pricing model\n\n\n  async deletePricingFromPricingModel(pricingModelID, pricingID) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      // get the pricingModel\n      let pricingModel;\n\n      try {\n        pricingModel = await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      }\n\n      let pricingToBeDeleted = pricingModel.pricing.find(pricing => pricing.id === parseInt(pricingID));\n\n      if (!pricingToBeDeleted) {\n        reject(`No pricing with id ${pricingID} found in pricing model id ${pricingModelID}`);\n      }\n\n      let pricingArray = pricingModel.pricing.filter(item => item !== pricingToBeDeleted); // else, return a success message\n\n      pricingModel.pricing = pricingArray;\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n        resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // getting an individual pricing model\n\n\n  async getMachine(machineID) {\n    return new Promise((resolve, reject) => {\n      // get the pricing model\n      let machine = machineData[machineID];\n\n      if (machine) {\n        // return the machine\n        resolve(machine);\n      } else {\n        // return an error\n        reject(`Machine with id ${machineID} not found`);\n      }\n    });\n  } // sets/updates the pricing model for an individual machine\n\n\n  async setPricingForMachine(machineID, pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      let machine; // get the machine\n\n      try {\n        machine = await this.getMachine(machineID);\n      } catch (err) {\n        reject(err);\n      } // get the pricingModel\n\n\n      try {\n        await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      } // else, update it by setting completed to true\n      // eslint-disable-next-line camelcase\n\n\n      machine.pricing_id = pricingModelID;\n      machineData[machineID] = machine;\n\n      try {\n        await fs.writeFileSync('./../machine.json', machineData, 'utf8');\n        resolve(machine);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // removes the pricing model from the machine (unsets it)\n\n\n  async unsetPricingForMachine(machineID, pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      let machine; // get the machine\n\n      try {\n        machine = await this.getMachine(machineID);\n      } catch (err) {\n        reject(err);\n      }\n\n      if (machine.pricing_id === pricingModelID) {\n        machine.pricing_id = '';\n        resolve(machine);\n      } else {\n        reject(`No pricing model with id ${pricingModelID} found for machine with id ${machineID}`);\n      }\n\n      machineData[machineID] = machine;\n\n      try {\n        await fs.writeFileSync('./../machine.json', machineData, 'utf8');\n        resolve(machine);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // get the pricing model and price configurations set for a given machine\n\n\n  async getPricingModelForMachine(machineID) {\n    return new Promise(async (resolve, reject) => {\n      let machine; // get the machine\n\n      try {\n        machine = await this.getMachine(machineID);\n      } catch (err) {\n        reject(err);\n      }\n\n      let pricingModelID = machine.pricing_id;\n      let pricingModel;\n\n      if (!pricingModelID || pricingModelID === '') {\n        // default pricing\n        try {\n          pricingModel = await this.getPricingModel();\n        } catch (err) {\n          reject(err);\n        }\n      } else {\n        try {\n          pricingModel = await this.getPricingModel(pricingModelID);\n        } catch (err) {\n          reject(err);\n        }\n      } // return the pricing model\n\n\n      resolve(pricingModel);\n    });\n  }\n\n}\n\nmodule.exports = Controller;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsicHJpY2luZ0RhdGEiLCJyZXF1aXJlIiwibWFjaGluZURhdGEiLCJmcyIsIkNvbnRyb2xsZXIiLCJnZXRQcmljaW5nTW9kZWxzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJfIiwiZ2V0UHJpY2luZ01vZGVsIiwicHJpY2luZ01vZGVsSUQiLCJyZWplY3QiLCJwcmljaW5nTW9kZWwiLCJkZWZhdWx0X3ByaWNpbmciLCJnZXRQcmljZXNGb3JQcmljaW5nTW9kZWwiLCJwcmljaW5nIiwiZXJyIiwiY3JlYXRlUHJpY2luZ01vZGVsIiwibmFtZSIsImkiLCJlbnRyaWVzIiwicHJpY2UiLCJ2YWx1ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm5ld1ByaWNpbmdNb2RlbCIsImlkIiwid3JpdGVGaWxlU3luYyIsImNyZWF0ZVByaWNpbmdGb3JQcmljaW5nTW9kZWwiLCJuZXdQcmljZSIsInByaWNpbmdJRCIsIm5ld1ByaWNpbmciLCJwdXNoIiwidXBkYXRlUHJpY2luZ01vZGVsIiwicHJpY2luZ01vZGVsQ2hhbmdlcyIsImRlbGV0ZVByaWNpbmdGcm9tUHJpY2luZ01vZGVsIiwicHJpY2luZ1RvQmVEZWxldGVkIiwiZmluZCIsInBhcnNlSW50IiwicHJpY2luZ0FycmF5IiwiZmlsdGVyIiwiaXRlbSIsImdldE1hY2hpbmUiLCJtYWNoaW5lSUQiLCJtYWNoaW5lIiwic2V0UHJpY2luZ0Zvck1hY2hpbmUiLCJwcmljaW5nX2lkIiwidW5zZXRQcmljaW5nRm9yTWFjaGluZSIsImdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGtCQUFELENBQTNCOztBQUNBLE1BQU1DLFdBQVcsR0FBR0QsT0FBTyxDQUFDLG9CQUFELENBQTNCOztBQUNBLE1BQU1FLEVBQUUsR0FBR0Ys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QUFBLE1BQU0sQ0FBQ0ssR0FBRCxDQUFOO0FBQ0E7QUFDRCxPQXhCNkMsQ0F5QjlDOzs7QUFDQVQsTUFBQUEsT0FBTyxDQUFDSyxZQUFELENBQVA7QUFDQSxLQTNCTSxDQUFQO0FBNEJBOztBQTVRZTs7QUE4UWpCc0MsTUFBTSxDQUFDQyxPQUFQLEdBQWlCL0MsVUFBakIiLCJzb3VyY2VSb290IjoiL2hvbWUvbWFzdGVyL2NoYWxsZW5nZS1yZXN0LWFwaS9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbi8qIGVzbGludC1kaXNhYmxlIHJhZGl4ICovXG4vLyBjb250cm9sbGVyLmpzXG4vLyBMb2dpYyBiZWhpbmQgdGhlIGZ1bmN0aW9uYWxpdGllc1xuY29uc3QgcHJpY2luZ0RhdGEgPSByZXF1aXJlKCcuLy4uL3ByaWNlcy5qc29uJyk7XG5jb25zdCBtYWNoaW5lRGF0YSA9IHJlcXVpcmUoJy4vLi4vbWFjaGluZXMuanNvbicpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5jbGFzcyBDb250cm9sbGVyIHtcblx0Ly8gZ2V0dGluZyBhbGwgcHJpY2UgbW9kZWxzIGZvciB0aGUgc3lzdGVtXG5cdGFzeW5jIGdldFByaWNpbmdNb2RlbHMgKCkge1xuXHRcdC8vIHJldHVybiBhbGwgdG9kb3Ncblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIF8pID0+IHJlc29sdmUocHJpY2luZ0RhdGEpKTtcblx0fVxuXG5cdC8vIGdldHRpbmcgYW4gaW5kaXZpZHVhbCBwcmljaW5nIG1vZGVsXG5cdGFzeW5jIGdldFByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nIG1vZGVsXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0aWYgKHByaWNpbmdNb2RlbElEKSB7XG5cdFx0XHRcdHByaWNpbmdNb2RlbCA9IHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIG5vIGlkIHNvIGRlZmF1bHQgcHJpY2luZ1xuXHRcdFx0XHRwcmljaW5nTW9kZWwgPSBwcmljaW5nRGF0YS5kZWZhdWx0X3ByaWNpbmc7XG5cdFx0XHR9XG5cdFx0XHRpZiAocHJpY2luZ01vZGVsKSB7XG5cdFx0XHRcdC8vIHJldHVybiB0aGUgcHJpY2luZyBtb2RlbFxuXHRcdFx0XHRyZXNvbHZlKHByaWNpbmdNb2RlbCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdFx0cmVqZWN0KGBQcmljaW5nIE1vZGVsIHdpdGggaWQgJHtwcmljaW5nTW9kZWxJRH0gbm90IGZvdW5kIGApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gZ2V0dGluZyBwcmljZXMgZm9yIGFuIGluZGl2aWR1YWwgcHJpY2luZyBtb2RlbFxuXHRhc3luYyBnZXRQcmljZXNGb3JQcmljaW5nTW9kZWwgKHByaWNpbmdNb2RlbElEKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCBhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHQvLyBnZXQgdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCBwcmljaW5nTW9kZWwgPSBhd2FpdCB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHRcdHJlc29sdmUocHJpY2luZ01vZGVsLnByaWNpbmcpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gY3JlYXRpbmcgYSBwcmljaW5nIG1vZGVsIGluIHRoZSBzeXN0ZW1cblx0YXN5bmMgY3JlYXRlUHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWwpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gRW5zdXJlIHByaWNpbmcgbW9kZWwgaXMgY29tcGxldGVcblx0XHRcdGlmICghcHJpY2luZ01vZGVsLm5hbWUpIHtcblx0XHRcdFx0cmVqZWN0KCdNaXNzaW5nIHBhcmFtZXRlcnM6IG5hbWUgKHN0ciknKTtcblx0XHRcdH0gZWxzZSBpZiAoIXByaWNpbmdNb2RlbC5wcmljaW5nKSB7XG5cdFx0XHRcdHJlamVjdCgnTWlzc2luZyBwYXJhbWV0ZXJzOiBwcmljaW5nIChhcnIpJyk7XG5cdFx0XHR9IGVsc2UgaWYgKCFwcmljaW5nTW9kZWwucHJpY2luZ1swXSkge1xuXHRcdFx0XHRyZWplY3QoJ1BsZWFzZSBhdCBsZWFzdCBhZGQgb25lIHByaWNpbmcgb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBrZXlzOiBwcmljZSAoaW50KSwgbmFtZSAoc3RyKSwgdmFsdWUgKGludCknKTtcblx0XHRcdH1cblx0XHRcdGZvciAobGV0IFtpLCBwcmljaW5nXSBvZiBwcmljaW5nTW9kZWwucHJpY2luZy5lbnRyaWVzKCkpIHtcblx0XHRcdFx0aWYgKCFwcmljaW5nLnByaWNlKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGBGb3VuZCBhbiBlcnJvcjogcHJpY2UgKGludCkgaXMgbWlzc2luZyBpbiB5b3VyIHByaWNpbmcgb2JqZWN0ICR7aX1gKTtcblx0XHRcdFx0fSBlbHNlIGlmICghcHJpY2luZy5uYW1lKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGBGb3VuZCBhbiBlcnJvcjogbmFtZSAoc3RyKSBpcyBtaXNzaW5nIGluIHlvdXIgcHJpY2luZyBvYmplY3QgJHtpfWApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFwcmljaW5nLnZhbHVlKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGBGb3VuZCBhbiBlcnJvcjogdmFsdWUgKGludCkgaXMgbWlzc2luZyBpbiB5b3VyIHByaWNpbmcgb2JqZWN0ICR7aX1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsSUQgPSBNYXRoLmZsb29yKDQgKyBNYXRoLnJhbmRvbSgpICogMTApO1xuXHRcdFx0Ly8gY3JlYXRlIGEgcHJpY2luZ01vZGVsLCB3aXRoIHJhbmRvbSBpZCBhbmQgZGF0YSBzZW50XG5cdFx0XHRsZXQgbmV3UHJpY2luZ01vZGVsID0ge1xuXHRcdFx0XHRpZDogcHJpY2luZ01vZGVsSUQsXG5cdFx0XHRcdC4uLnByaWNpbmdNb2RlbFxuXHRcdFx0fTtcblx0XHRcdHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IG5ld1ByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0Ly8gcmV0dXJuIHRoZSBuZXcgY3JlYXRlZCB0b2RvXG5cdFx0XHQgICAgcmVzb2x2ZShuZXdQcmljaW5nTW9kZWwuaWQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gYWRkcyBhIG5ldyBwcmljZSBjb25maWd1cmF0aW9uIGZvciBhIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgY3JlYXRlUHJpY2luZ0ZvclByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQsIG5ld1ByaWNlKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCBhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cHJpY2luZ01vZGVsID0gYXdhaXQgdGhpcy5nZXRQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFuZXdQcmljZS5wcmljZSkge1xuXHRcdFx0XHRyZWplY3QoJ0ZvdW5kIGFuIGVycm9yOiBwcmljZSAoaW50KSBpcyBtaXNzaW5nIGluIHlvdXIgcHJpY2luZyBvYmplY3QnKTtcblx0XHRcdH0gZWxzZSBpZiAoIW5ld1ByaWNlLm5hbWUpIHtcblx0XHRcdFx0cmVqZWN0KCdGb3VuZCBhbiBlcnJvcjogbmFtZSAoc3RyKSBpcyBtaXNzaW5nIGluIHlvdXIgcHJpY2luZyBvYmplY3QnKTtcblx0XHRcdH0gZWxzZSBpZiAoIW5ld1ByaWNlLnZhbHVlKSB7XG5cdFx0XHRcdHJlamVjdCgnRm91bmQgYW4gZXJyb3I6IHZhbHVlIChpbnQpIGlzIG1pc3NpbmcgaW4geW91ciBwcmljaW5nIG9iamVjdCcpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IHByaWNpbmdJRCA9IE1hdGguZmxvb3IoNCArIE1hdGgucmFuZG9tKCkgKiAxMCk7XG5cdFx0XHQvLyBjcmVhdGUgYSBwcmljaW5nTW9kZWwsIHdpdGggcmFuZG9tIGlkIGFuZCBkYXRhIHNlbnRcblx0XHRcdGxldCBuZXdQcmljaW5nID0ge1xuXHRcdFx0XHRpZDogcHJpY2luZ0lELFxuXHRcdFx0XHQuLi5uZXdQcmljZVxuXHRcdFx0fTtcblx0XHRcdC8vIEFkZCB0aGUgcHJpY2luZyBvYmplY3QgdG8gcHJpY2luZyBtb2RlbFxuXHRcdFx0cHJpY2luZ01vZGVsLnByaWNpbmcucHVzaChuZXdQcmljaW5nKTtcblx0XHRcdHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IHByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0Ly8gcmV0dXJuIHRoZSBwcmljaW5nIG1vZGVsXG5cdFx0XHQgICAgYXdhaXQgcmVzb2x2ZShwcmljaW5nTW9kZWwpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gdXBkYXRpbmcgYSBwcmljaW5nIG1vZGVsXG5cdGFzeW5jIHVwZGF0ZVByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQsIHByaWNpbmdNb2RlbENoYW5nZXMpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZ01vZGVsXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cHJpY2luZ01vZGVsID0gYXdhaXQgdGhpcy5nZXRQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gaWYgbm8gbmFtZSwgcmV0dXJuIGFuIGVycm9yXG5cdFx0XHRpZiAoIXByaWNpbmdNb2RlbENoYW5nZXMubmFtZSkge1xuXHRcdFx0XHRyZWplY3QoJ01pc3NpbmcgcGFyYW1ldGVyczogbmFtZSAoc3RyKScpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gcHJpY2luZyBtb2RlbCBvbmx5IGNvbnRhaW5zIG5hbWUgYXMgbWV0YSBkYXRhXG5cdFx0XHRwcmljaW5nTW9kZWwubmFtZSA9IHByaWNpbmdNb2RlbENoYW5nZXMubmFtZTtcblx0XHRcdHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IHByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0cmVzb2x2ZShwcmljaW5nTW9kZWwpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gcmVtb3ZlcyBhIHByaWNlIGNvbmZpZ3VyYXRpb24gZnJvbSBhIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgZGVsZXRlUHJpY2luZ0Zyb21QcmljaW5nTW9kZWwgKHByaWNpbmdNb2RlbElELCBwcmljaW5nSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZ01vZGVsXG5cdFx0XHQvLyBnZXQgdGhlIHByaWNpbmdNb2RlbFxuXHRcdFx0bGV0IHByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHByaWNpbmdNb2RlbCA9IGF3YWl0IHRoaXMuZ2V0UHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElEKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH1cblx0XHRcdGxldCBwcmljaW5nVG9CZURlbGV0ZWQgPSBwcmljaW5nTW9kZWwucHJpY2luZy5maW5kKChwcmljaW5nKSA9PiBwcmljaW5nLmlkID09PSBwYXJzZUludChwcmljaW5nSUQpKTtcblx0XHRcdGlmICghcHJpY2luZ1RvQmVEZWxldGVkKSB7XG5cdFx0XHRcdHJlamVjdChgTm8gcHJpY2luZyB3aXRoIGlkICR7cHJpY2luZ0lEfSBmb3VuZCBpbiBwcmljaW5nIG1vZGVsIGlkICR7cHJpY2luZ01vZGVsSUR9YCk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHJpY2luZ0FycmF5ID0gcHJpY2luZ01vZGVsLnByaWNpbmcuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gcHJpY2luZ1RvQmVEZWxldGVkKTtcblx0XHRcdC8vIGVsc2UsIHJldHVybiBhIHN1Y2Nlc3MgbWVzc2FnZVxuXHRcdFx0cHJpY2luZ01vZGVsLnByaWNpbmcgPSBwcmljaW5nQXJyYXk7XG5cdFx0XHRwcmljaW5nRGF0YVtwcmljaW5nTW9kZWxJRF0gPSBwcmljaW5nTW9kZWw7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBmcy53cml0ZUZpbGVTeW5jKCcuLy4uL3ByaWNlcy5qc29uJywgcHJpY2luZ0RhdGEsICd1dGY4Jyk7XG5cdFx0XHRcdHJlc29sdmUocHJpY2luZ01vZGVsKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIGdldHRpbmcgYW4gaW5kaXZpZHVhbCBwcmljaW5nIG1vZGVsXG5cdGFzeW5jIGdldE1hY2hpbmUgKG1hY2hpbmVJRCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHQvLyBnZXQgdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdGxldCBtYWNoaW5lID0gbWFjaGluZURhdGFbbWFjaGluZUlEXTtcblx0XHRcdGlmIChtYWNoaW5lKSB7XG5cdFx0XHRcdC8vIHJldHVybiB0aGUgbWFjaGluZVxuXHRcdFx0XHRyZXNvbHZlKG1hY2hpbmUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gcmV0dXJuIGFuIGVycm9yXG5cdFx0XHRcdHJlamVjdChgTWFjaGluZSB3aXRoIGlkICR7bWFjaGluZUlEfSBub3QgZm91bmRgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIHNldHMvdXBkYXRlcyB0aGUgcHJpY2luZyBtb2RlbCBmb3IgYW4gaW5kaXZpZHVhbCBtYWNoaW5lXG5cdGFzeW5jIHNldFByaWNpbmdGb3JNYWNoaW5lIChtYWNoaW5lSUQsIHByaWNpbmdNb2RlbElEKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKCBhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cblx0XHRcdGxldCBtYWNoaW5lO1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRtYWNoaW5lID0gYXdhaXQgdGhpcy5nZXRNYWNoaW5lKG1hY2hpbmVJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHQvLyBnZXQgdGhlIHByaWNpbmdNb2RlbFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5nZXRQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gZWxzZSwgdXBkYXRlIGl0IGJ5IHNldHRpbmcgY29tcGxldGVkIHRvIHRydWVcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2Vcblx0XHRcdG1hY2hpbmUucHJpY2luZ19pZCA9IHByaWNpbmdNb2RlbElEO1xuXHRcdFx0bWFjaGluZURhdGFbbWFjaGluZUlEXSA9IG1hY2hpbmU7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBmcy53cml0ZUZpbGVTeW5jKCcuLy4uL21hY2hpbmUuanNvbicsIG1hY2hpbmVEYXRhLCAndXRmOCcpO1xuXHRcdFx0XHRyZXNvbHZlKG1hY2hpbmUpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gcmVtb3ZlcyB0aGUgcHJpY2luZyBtb2RlbCBmcm9tIHRoZSBtYWNoaW5lICh1bnNldHMgaXQpXG5cdGFzeW5jIHVuc2V0UHJpY2luZ0Zvck1hY2hpbmUgKG1hY2hpbmVJRCwgcHJpY2luZ01vZGVsSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxldCBtYWNoaW5lO1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRtYWNoaW5lID0gYXdhaXQgdGhpcy5nZXRNYWNoaW5lKG1hY2hpbmVJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWFjaGluZS5wcmljaW5nX2lkID09PSBwcmljaW5nTW9kZWxJRCkge1xuXHRcdFx0XHRtYWNoaW5lLnByaWNpbmdfaWQgPSAnJztcblx0XHRcdFx0cmVzb2x2ZShtYWNoaW5lKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlamVjdChgTm8gcHJpY2luZyBtb2RlbCB3aXRoIGlkICR7cHJpY2luZ01vZGVsSUR9IGZvdW5kIGZvciBtYWNoaW5lIHdpdGggaWQgJHttYWNoaW5lSUR9YCk7XG5cdFx0XHR9XG5cdFx0XHRtYWNoaW5lRGF0YVttYWNoaW5lSURdID0gbWFjaGluZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vbWFjaGluZS5qc29uJywgbWFjaGluZURhdGEsICd1dGY4Jyk7XG5cdFx0XHRcdHJlc29sdmUobWFjaGluZSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0Ly8gZ2V0IHRoZSBwcmljaW5nIG1vZGVsIGFuZCBwcmljZSBjb25maWd1cmF0aW9ucyBzZXQgZm9yIGEgZ2l2ZW4gbWFjaGluZVxuXHRhc3luYyBnZXRQcmljaW5nTW9kZWxGb3JNYWNoaW5lIChtYWNoaW5lSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxldCBtYWNoaW5lO1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRtYWNoaW5lID0gYXdhaXQgdGhpcy5nZXRNYWNoaW5lKG1hY2hpbmVJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsSUQgPSBtYWNoaW5lLnByaWNpbmdfaWQ7XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0aWYgKCFwcmljaW5nTW9kZWxJRCB8fCBwcmljaW5nTW9kZWxJRCA9PT0gJycpIHtcblx0XHRcdFx0Ly8gZGVmYXVsdCBwcmljaW5nXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cHJpY2luZ01vZGVsID0gYXdhaXQgdGhpcy5nZXRQcmljaW5nTW9kZWwoKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwcmljaW5nTW9kZWwgPSBhd2FpdCB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyByZXR1cm4gdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdHJlc29sdmUocHJpY2luZ01vZGVsKTtcblx0XHR9KTtcblx0fVxufVxubW9kdWxlLmV4cG9ydHMgPSBDb250cm9sbGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "controller.js"
      ],
      "names": [
        "pricingData",
        "require",
        "machineData",
        "fs",
        "Controller",
        "getPricingModels",
        "Promise",
        "resolve",
        "_",
        "getPricingModel",
        "pricingModelID",
        "reject",
        "pricingModel",
        "default_pricing",
        "getPricesForPricingModel",
        "pricing",
        "err",
        "createPricingModel",
        "name",
        "i",
        "entries",
        "price",
        "value",
        "Math",
        "floor",
        "random",
        "newPricingModel",
        "id",
        "writeFileSync",
        "createPricingForPricingModel",
        "newPrice",
        "pricingID",
        "newPricing",
        "push",
        "updatePricingModel",
        "pricingModelChanges",
        "deletePricingFromPricingModel",
        "pricingToBeDeleted",
        "find",
        "parseInt",
        "pricingArray",
        "filter",
        "item",
        "getMachine",
        "machineID",
        "machine",
        "setPricingForMachine",
        "pricing_id",
        "unsetPricingForMachine",
        "getPricingModelForMachine",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "sourcesContent": [
        "/* eslint-disable camelcase */\n/* eslint-disable radix */\n// controller.js\n// Logic behind the functionalities\nconst pricingData = require('./../prices.json');\nconst machineData = require('./../machines.json');\nconst fs = require('fs');\n\nclass Controller {\n\t// getting all price models for the system\n\tasync getPricingModels () {\n\t\t// return all todos\n\t\treturn new Promise((resolve, _) => resolve(pricingData));\n\t}\n\n\t// getting an individual pricing model\n\tasync getPricingModel (pricingModelID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\tlet pricingModel;\n\t\t\tif (pricingModelID) {\n\t\t\t\tpricingModel = pricingData[pricingModelID];\n\t\t\t} else {\n\t\t\t\t// no id so default pricing\n\t\t\t\tpricingModel = pricingData.default_pricing;\n\t\t\t}\n\t\t\tif (pricingModel) {\n\t\t\t\t// return the pricing model\n\t\t\t\tresolve(pricingModel);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Pricing Model with id ${pricingModelID} not found `);\n\t\t\t}\n\t\t});\n\t}\n\n\t// getting prices for an individual pricing model\n\tasync getPricesForPricingModel (pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\ttry {\n\t\t\t\tlet pricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t\tresolve(pricingModel.pricing);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// creating a pricing model in the system\n\tasync createPricingModel (pricingModel) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\t// Ensure pricing model is complete\n\t\t\tif (!pricingModel.name) {\n\t\t\t\treject('Missing parameters: name (str)');\n\t\t\t} else if (!pricingModel.pricing) {\n\t\t\t\treject('Missing parameters: pricing (arr)');\n\t\t\t} else if (!pricingModel.pricing[0]) {\n\t\t\t\treject('Please at least add one pricing object with the following keys: price (int), name (str), value (int)');\n\t\t\t}\n\t\t\tfor (let [i, pricing] of pricingModel.pricing.entries()) {\n\t\t\t\tif (!pricing.price) {\n\t\t\t\t\treject(`Found an error: price (int) is missing in your pricing object ${i}`);\n\t\t\t\t} else if (!pricing.name) {\n\t\t\t\t\treject(`Found an error: name (str) is missing in your pricing object ${i}`);\n\t\t\t\t} else if (!pricing.value) {\n\t\t\t\t\treject(`Found an error: value (int) is missing in your pricing object ${i}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet pricingModelID = Math.floor(4 + Math.random() * 10);\n\t\t\t// create a pricingModel, with random id and data sent\n\t\t\tlet newPricingModel = {\n\t\t\t\tid: pricingModelID,\n\t\t\t\t...pricingModel\n\t\t\t};\n\t\t\tpricingData[pricingModelID] = newPricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\t// return the new created todo\n\t\t\t    resolve(newPricingModel.id);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// adds a new price configuration for a pricing model\n\tasync createPricingForPricingModel (pricingModelID, newPrice) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet pricingModel;\n\t\t\ttry {\n\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tif (!newPrice.price) {\n\t\t\t\treject('Found an error: price (int) is missing in your pricing object');\n\t\t\t} else if (!newPrice.name) {\n\t\t\t\treject('Found an error: name (str) is missing in your pricing object');\n\t\t\t} else if (!newPrice.value) {\n\t\t\t\treject('Found an error: value (int) is missing in your pricing object');\n\t\t\t}\n\t\t\tlet pricingID = Math.floor(4 + Math.random() * 10);\n\t\t\t// create a pricingModel, with random id and data sent\n\t\t\tlet newPricing = {\n\t\t\t\tid: pricingID,\n\t\t\t\t...newPrice\n\t\t\t};\n\t\t\t// Add the pricing object to pricing model\n\t\t\tpricingModel.pricing.push(newPricing);\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\t// return the pricing model\n\t\t\t    await resolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// updating a pricing model\n\tasync updatePricingModel (pricingModelID, pricingModelChanges) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\tlet pricingModel;\n\t\t\ttry {\n\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\t// if no name, return an error\n\t\t\tif (!pricingModelChanges.name) {\n\t\t\t\treject('Missing parameters: name (str)');\n\t\t\t}\n\t\t\t// pricing model only contains name as meta data\n\t\t\tpricingModel.name = pricingModelChanges.name;\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\tresolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// removes a price configuration from a pricing model\n\tasync deletePricingFromPricingModel (pricingModelID, pricingID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\t// get the pricingModel\n\t\t\tlet pricingModel;\n\t\t\ttry {\n\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tlet pricingToBeDeleted = pricingModel.pricing.find((pricing) => pricing.id === parseInt(pricingID));\n\t\t\tif (!pricingToBeDeleted) {\n\t\t\t\treject(`No pricing with id ${pricingID} found in pricing model id ${pricingModelID}`);\n\t\t\t}\n\t\t\tlet pricingArray = pricingModel.pricing.filter(item => item !== pricingToBeDeleted);\n\t\t\t// else, return a success message\n\t\t\tpricingModel.pricing = pricingArray;\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\tresolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// getting an individual pricing model\n\tasync getMachine (machineID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\tlet machine = machineData[machineID];\n\t\t\tif (machine) {\n\t\t\t\t// return the machine\n\t\t\t\tresolve(machine);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Machine with id ${machineID} not found`);\n\t\t\t}\n\t\t});\n\t}\n\n\t// sets/updates the pricing model for an individual machine\n\tasync setPricingForMachine (machineID, pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\n\t\t\tlet machine;\n\t\t\t// get the machine\n\t\t\ttry {\n\t\t\t\tmachine = await this.getMachine(machineID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\t// get the pricingModel\n\t\t\ttry {\n\t\t\t\tawait this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\t// else, update it by setting completed to true\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tmachine.pricing_id = pricingModelID;\n\t\t\tmachineData[machineID] = machine;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../machine.json', machineData, 'utf8');\n\t\t\t\tresolve(machine);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// removes the pricing model from the machine (unsets it)\n\tasync unsetPricingForMachine (machineID, pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet machine;\n\t\t\t// get the machine\n\t\t\ttry {\n\t\t\t\tmachine = await this.getMachine(machineID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tif (machine.pricing_id === pricingModelID) {\n\t\t\t\tmachine.pricing_id = '';\n\t\t\t\tresolve(machine);\n\t\t\t} else {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found for machine with id ${machineID}`);\n\t\t\t}\n\t\t\tmachineData[machineID] = machine;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../machine.json', machineData, 'utf8');\n\t\t\t\tresolve(machine);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\t// get the pricing model and price configurations set for a given machine\n\tasync getPricingModelForMachine (machineID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet machine;\n\t\t\t// get the machine\n\t\t\ttry {\n\t\t\t\tmachine = await this.getMachine(machineID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tlet pricingModelID = machine.pricing_id;\n\t\t\tlet pricingModel;\n\t\t\tif (!pricingModelID || pricingModelID === '') {\n\t\t\t\t// default pricing\n\t\t\t\ttry {\n\t\t\t\t\tpricingModel = await this.getPricingModel();\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return the pricing model\n\t\t\tresolve(pricingModel);\n\t\t});\n\t}\n}\nmodule.exports = Controller;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1635706059183
  }
}