{
  "{\"assumptions\":{},\"sourceRoot\":\"/home/master/challenge-rest-api/src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/master/challenge-rest-api\",\"filename\":\"/home/master/challenge-rest-api/src/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/master/challenge-rest-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/master/challenge-rest-api",
      "filename": "/home/master/challenge-rest-api/src/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/master/challenge-rest-api",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/master/challenge-rest-api/src/index.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/master/challenge-rest-api/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/master/challenge-rest-api/src",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nvar _koa = _interopRequireDefault(require(\"koa\"));\n\nvar _koaRouter = _interopRequireDefault(require(\"koa-router\"));\n\nvar _koaBodyparser = _interopRequireDefault(require(\"koa-bodyparser\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst app = new _koa.default();\nconst PORT = process.env.PORT || 1337;\nconst router = new _koaRouter.default();\n\nconst API = require('./controller');\n\nrouter.use((0, _koaBodyparser.default)()).get('/', (ctx, next) => {\n  ctx.body = 'Hello, welcome to the Polycade API';\n  ctx.status = 200;\n}).get('/pricing-models', async (ctx, next) => {\n  const pricingModels = await new API().getPricingModels();\n  ctx.status = 200;\n  ctx.body = pricingModels;\n}).post('/pricing-models', async (ctx, next) => {\n  const pricingModel = ctx.request.body;\n\n  try {\n    const response = await new API().createPricingModel(pricingModel);\n    ctx.body = response;\n    ctx.status = 201;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 400;\n  }\n}).get('/pricing-models/:pricingModelID', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const pricingModel = await new API().getPricingModel(pricingModelID);\n    ctx.body = pricingModel;\n    ctx.status = 200;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 404;\n  }\n}).put('/pricing-models/:pricingModelID', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n  const pricingModelChanges = ctx.request.body;\n\n  try {\n    const pricingModel = await new API().updatePricingModel(pricingModelID, pricingModelChanges);\n    ctx.body = pricingModel;\n    ctx.status = 202;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 400;\n  }\n}).get('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const prices = await new API().getPricesForPricingModel(pricingModelID);\n    ctx.body = prices;\n    ctx.status = 200;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 404;\n  }\n}).post('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n  const newPrice = ctx.request.body;\n\n  try {\n    const response = await new API().createPricingForPricingModel(pricingModelID, newPrice);\n    ctx.body = response;\n    ctx.status = 201;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 400;\n  }\n}).del('/pricing-models/:pricingModelID/prices/:priceID', async (ctx, next) => {\n  const pricingModelID = ctx.params.pricingModelID;\n  const pricingID = ctx.params.priceID;\n\n  try {\n    const response = await new API().deletePricingFromPricingModel(pricingModelID, pricingID);\n    ctx.body = response;\n    ctx.status = 200;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 400;\n  }\n}).get('/machines/:machineID', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n\n  try {\n    const response = await new API().getMachine(machineID);\n    ctx.body = response;\n    ctx.status = 200;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 404;\n  }\n}).put('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const response = await new API().setPricingForMachine(machineID, pricingModelID);\n    ctx.body = response;\n    ctx.status = 202;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 400;\n  }\n}).del('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n  const pricingModelID = ctx.params.pricingModelID;\n\n  try {\n    const response = await new API().unsetPricingForMachine(machineID, pricingModelID);\n    ctx.body = response;\n    ctx.status = 200;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 400;\n  }\n}).get('/machines/:machineID/prices', async (ctx, next) => {\n  const machineID = ctx.params.machineID;\n\n  try {\n    const response = await new API().getPricingModelForMachine(machineID);\n    ctx.body = response;\n    ctx.status = 200;\n  } catch (err) {\n    ctx.body = err;\n    ctx.status = 404;\n  }\n});\nconst server = app.use(router.routes()).listen(PORT, () => console.log(`Server listening on port ${PORT}`));\nmodule.exports = server;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImFwcCIsIktvYSIsIlBPUlQiLCJwcm9jZXNzIiwiZW52Iiwicm91dGVyIiwiUm91dGVyIiwiQVBJIiwicmVxdWlyZSIsInVzZSIsImdldCIsImN0eCIsIm5leHQiLCJib2R5Iiwic3RhdHVzIiwicHJpY2luZ01vZGVscyIsImdldFByaWNpbmdNb2RlbHMiLCJwb3N0IiwicHJpY2luZ01vZGVsIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiY3JlYXRlUHJpY2luZ01vZGVsIiwiZXJyIiwicHJpY2luZ01vZGVsSUQiLCJwYXJhbXMiLCJnZXRQcmljaW5nTW9kZWwiLCJwdXQiLCJwcmljaW5nTW9kZWxDaGFuZ2VzIiwidXBkYXRlUHJpY2luZ01vZGVsIiwicHJpY2VzIiwiZ2V0UHJpY2VzRm9yUHJpY2luZ01vZGVsIiwibmV3UHJpY2UiLCJjcmVhdGVQcmljaW5nRm9yUHJpY2luZ01vZGVsIiwiZGVsIiwicHJpY2luZ0lEIiwicHJpY2VJRCIsImRlbGV0ZVByaWNpbmdGcm9tUHJpY2luZ01vZGVsIiwibWFjaGluZUlEIiwiZ2V0TWFjaGluZSIsInNldFByaWNpbmdGb3JNYWNoaW5lIiwidW5zZXRQcmljaW5nRm9yTWFjaGluZSIsImdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUiLCJzZXJ2ZXIiLCJyb3V0ZXMiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7OztBQUVBLE1BQU1BLEdBQUcsR0FBRyxJQUFJQyxZQUFKLEVBQVo7QUFDQSxNQUFNQyxJQUFJLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixJQUFaLElBQW9CLElBQWpDO0FBQ0EsTUFBTUcsTUFBTSxHQUFHLElBQUlDLGtCQUFKLEVBQWY7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHQyxPQUFPLENBQUMsY0FBRCxDQUFuQjs7QUFFQUgsTUFBTSxDQUNKSSxHQURGLENBQ00sNkJB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QUFPUSxHQUFQLEVBQVk7QUFDYlgsSUFBQUEsR0FBRyxDQUFDRSxJQUFKLEdBQVdTLEdBQVg7QUFDQVgsSUFBQUEsR0FBRyxDQUFDRyxNQUFKLEdBQWEsR0FBYjtBQUNBO0FBQ0QsQ0E5SEY7QUFpSUEsTUFBTTRCLE1BQU0sR0FBRzFDLEdBQUcsQ0FDaEJTLEdBRGEsQ0FDVEosTUFBTSxDQUFDc0MsTUFBUCxFQURTLEVBRWJDLE1BRmEsQ0FFTjFDLElBRk0sRUFFQSxNQUNiMkMsT0FBTyxDQUFDQyxHQUFSLENBQWEsNEJBQTJCNUMsSUFBSyxFQUE3QyxDQUhhLENBQWY7QUFNQTZDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQk4sTUFBakIiLCJzb3VyY2VSb290IjoiL2hvbWUvbWFzdGVyL2NoYWxsZW5nZS1yZXN0LWFwaS9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgS29hIGZyb20gJ2tvYSc7XG5pbXBvcnQgUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAna29hLWJvZHlwYXJzZXInO1xuXG5jb25zdCBhcHAgPSBuZXcgS29hKCk7XG5jb25zdCBQT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAxMzM3O1xuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuY29uc3QgQVBJID0gcmVxdWlyZSgnLi9jb250cm9sbGVyJyk7XG5cbnJvdXRlclxuXHQudXNlKGJvZHlQYXJzZXIoKSlcblx0LmdldCgnLycsIChjdHgsIG5leHQpID0+IHtcblx0XHRjdHguYm9keSA9ICdIZWxsbywgd2VsY29tZSB0byB0aGUgUG9seWNhZGUgQVBJJztcblx0XHRjdHguc3RhdHVzID0gMjAwO1xuXHR9KVxuXHQuZ2V0KCcvcHJpY2luZy1tb2RlbHMnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG5cblx0XHRjb25zdCBwcmljaW5nTW9kZWxzID0gYXdhaXQgbmV3IEFQSSgpLmdldFByaWNpbmdNb2RlbHMoKTtcblx0XHRjdHguc3RhdHVzID0gMjAwO1xuXHRcdGN0eC5ib2R5ID0gcHJpY2luZ01vZGVscztcblx0fSlcblx0LnBvc3QoJy9wcmljaW5nLW1vZGVscycsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcblx0XHRjb25zdCBwcmljaW5nTW9kZWwgPSBjdHgucmVxdWVzdC5ib2R5O1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldyBBUEkoKS5jcmVhdGVQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsKTtcblx0XHRcdGN0eC5ib2R5ID0gcmVzcG9uc2U7XG5cdFx0XHRjdHguc3RhdHVzID0gMjAxO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y3R4LmJvZHkgPSBlcnI7XG5cdFx0XHRjdHguc3RhdHVzID0gNDAwO1xuXHRcdH1cblx0fSlcblx0LmdldCgnL3ByaWNpbmctbW9kZWxzLzpwcmljaW5nTW9kZWxJRCcsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcblx0XHRjb25zdCBwcmljaW5nTW9kZWxJRCA9IGN0eC5wYXJhbXMucHJpY2luZ01vZGVsSUQ7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHByaWNpbmdNb2RlbCA9IGF3YWl0IG5ldyBBUEkoKS5nZXRQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQpO1xuXHRcdFx0Y3R4LmJvZHkgPSBwcmljaW5nTW9kZWw7XG5cdFx0XHRjdHguc3RhdHVzID0gMjAwO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y3R4LmJvZHkgPSBlcnI7XG5cdFx0XHRjdHguc3RhdHVzID0gNDA0O1xuXHRcdH1cblx0fSlcblx0LnB1dCgnL3ByaWNpbmctbW9kZWxzLzpwcmljaW5nTW9kZWxJRCcsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcblx0XHRjb25zdCBwcmljaW5nTW9kZWxJRCA9IGN0eC5wYXJhbXMucHJpY2luZ01vZGVsSUQ7XG5cdFx0Y29uc3QgcHJpY2luZ01vZGVsQ2hhbmdlcyA9IGN0eC5yZXF1ZXN0LmJvZHk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHByaWNpbmdNb2RlbCA9IGF3YWl0IG5ldyBBUEkoKS51cGRhdGVQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQsIHByaWNpbmdNb2RlbENoYW5nZXMpO1xuXHRcdFx0Y3R4LmJvZHkgPSBwcmljaW5nTW9kZWw7XG5cdFx0XHRjdHguc3RhdHVzID0gMjAyO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y3R4LmJvZHkgPSBlcnI7XG5cdFx0XHRjdHguc3RhdHVzID0gNDAwO1xuXHRcdH1cblx0fSlcblx0LmdldCgnL3ByaWNpbmctbW9kZWxzLzpwcmljaW5nTW9kZWxJRC9wcmljZXMnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG5cdFx0Y29uc3QgcHJpY2luZ01vZGVsSUQgPSBjdHgucGFyYW1zLnByaWNpbmdNb2RlbElEO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBwcmljZXMgPSBhd2FpdCBuZXcgQVBJKCkuZ2V0UHJpY2VzRm9yUHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElEKTtcblx0XHRcdGN0eC5ib2R5ID0gcHJpY2VzO1xuXHRcdFx0Y3R4LnN0YXR1cyA9IDIwMDtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGN0eC5ib2R5ID0gZXJyO1xuXHRcdFx0Y3R4LnN0YXR1cyA9IDQwNDtcblx0XHR9XG5cdH0pXG5cdC5wb3N0KCcvcHJpY2luZy1tb2RlbHMvOnByaWNpbmdNb2RlbElEL3ByaWNlcycsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcblx0XHRjb25zdCBwcmljaW5nTW9kZWxJRCA9IGN0eC5wYXJhbXMucHJpY2luZ01vZGVsSUQ7XG5cdFx0Y29uc3QgbmV3UHJpY2UgPSBjdHgucmVxdWVzdC5ib2R5O1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldyBBUEkoKS5jcmVhdGVQcmljaW5nRm9yUHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElELCBuZXdQcmljZSk7XG5cdFx0XHRjdHguYm9keSA9IHJlc3BvbnNlO1xuXHRcdFx0Y3R4LnN0YXR1cyA9IDIwMTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGN0eC5ib2R5ID0gZXJyO1xuXHRcdFx0Y3R4LnN0YXR1cyA9IDQwMDtcblx0XHR9XG5cdH0pXG5cdC5kZWwoJy9wcmljaW5nLW1vZGVscy86cHJpY2luZ01vZGVsSUQvcHJpY2VzLzpwcmljZUlEJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuXHRcdGNvbnN0IHByaWNpbmdNb2RlbElEID0gY3R4LnBhcmFtcy5wcmljaW5nTW9kZWxJRDtcblx0XHRjb25zdCBwcmljaW5nSUQgPSBjdHgucGFyYW1zLnByaWNlSUQ7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IEFQSSgpLmRlbGV0ZVByaWNpbmdGcm9tUHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElELCBwcmljaW5nSUQpO1xuXHRcdFx0Y3R4LmJvZHkgPSByZXNwb25zZTtcblx0XHRcdGN0eC5zdGF0dXMgPSAyMDA7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjdHguYm9keSA9IGVycjtcblx0XHRcdGN0eC5zdGF0dXMgPSA0MDA7XG5cdFx0fVxuXHR9KVxuXHQuZ2V0KCcvbWFjaGluZXMvOm1hY2hpbmVJRCcsIGFzeW5jIChjdHgsIG5leHQpID0+IHtcblx0XHRjb25zdCBtYWNoaW5lSUQgPSBjdHgucGFyYW1zLm1hY2hpbmVJRDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgQVBJKCkuZ2V0TWFjaGluZShtYWNoaW5lSUQpO1xuXHRcdFx0Y3R4LmJvZHkgPSByZXNwb25zZTtcblx0XHRcdGN0eC5zdGF0dXMgPSAyMDA7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjdHguYm9keSA9IGVycjtcblx0XHRcdGN0eC5zdGF0dXMgPSA0MDQ7XG5cdFx0fVxuXHR9KVxuXHQucHV0KCcvbWFjaGluZXMvOm1hY2hpbmVJRC9wcmljZXMvOnByaWNpbmdNb2RlbElEJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuXHRcdGNvbnN0IG1hY2hpbmVJRCA9IGN0eC5wYXJhbXMubWFjaGluZUlEO1xuXHRcdGNvbnN0IHByaWNpbmdNb2RlbElEID0gY3R4LnBhcmFtcy5wcmljaW5nTW9kZWxJRDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBuZXcgQVBJKCkuc2V0UHJpY2luZ0Zvck1hY2hpbmUobWFjaGluZUlELCBwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHRjdHguYm9keSA9IHJlc3BvbnNlO1xuXHRcdFx0Y3R4LnN0YXR1cyA9IDIwMjtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGN0eC5ib2R5ID0gZXJyO1xuXHRcdFx0Y3R4LnN0YXR1cyA9IDQwMDtcblx0XHR9XG5cdH0pXG5cdC5kZWwoJy9tYWNoaW5lcy86bWFjaGluZUlEL3ByaWNlcy86cHJpY2luZ01vZGVsSUQnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG5cdFx0Y29uc3QgbWFjaGluZUlEID0gY3R4LnBhcmFtcy5tYWNoaW5lSUQ7XG5cdFx0Y29uc3QgcHJpY2luZ01vZGVsSUQgPSBjdHgucGFyYW1zLnByaWNpbmdNb2RlbElEO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IG5ldyBBUEkoKS51bnNldFByaWNpbmdGb3JNYWNoaW5lKG1hY2hpbmVJRCwgcHJpY2luZ01vZGVsSUQpO1xuXHRcdFx0Y3R4LmJvZHkgPSByZXNwb25zZTtcblx0XHRcdGN0eC5zdGF0dXMgPSAyMDA7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjdHguYm9keSA9IGVycjtcblx0XHRcdGN0eC5zdGF0dXMgPSA0MDA7XG5cdFx0fVxuXHR9KVxuXHQuZ2V0KCcvbWFjaGluZXMvOm1hY2hpbmVJRC9wcmljZXMnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG5cdFx0Y29uc3QgbWFjaGluZUlEID0gY3R4LnBhcmFtcy5tYWNoaW5lSUQ7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbmV3IEFQSSgpLmdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUobWFjaGluZUlEKTtcblx0XHRcdGN0eC5ib2R5ID0gcmVzcG9uc2U7XG5cdFx0XHRjdHguc3RhdHVzID0gMjAwO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y3R4LmJvZHkgPSBlcnI7XG5cdFx0XHRjdHguc3RhdHVzID0gNDA0O1xuXHRcdH1cblx0fSk7XG5cblxuY29uc3Qgc2VydmVyID0gYXBwXG5cdC51c2Uocm91dGVyLnJvdXRlcygpKVxuXHQubGlzdGVuKFBPUlQsICgpID0+XG5cdFx0Y29uc29sZS5sb2coYFNlcnZlciBsaXN0ZW5pbmcgb24gcG9ydCAke1BPUlR9YClcblx0KTtcblxubW9kdWxlLmV4cG9ydHMgPSBzZXJ2ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "app",
        "Koa",
        "PORT",
        "process",
        "env",
        "router",
        "Router",
        "API",
        "require",
        "use",
        "get",
        "ctx",
        "next",
        "body",
        "status",
        "pricingModels",
        "getPricingModels",
        "post",
        "pricingModel",
        "request",
        "response",
        "createPricingModel",
        "err",
        "pricingModelID",
        "params",
        "getPricingModel",
        "put",
        "pricingModelChanges",
        "updatePricingModel",
        "prices",
        "getPricesForPricingModel",
        "newPrice",
        "createPricingForPricingModel",
        "del",
        "pricingID",
        "priceID",
        "deletePricingFromPricingModel",
        "machineID",
        "getMachine",
        "setPricingForMachine",
        "unsetPricingForMachine",
        "getPricingModelForMachine",
        "server",
        "routes",
        "listen",
        "console",
        "log",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,GAAG,GAAG,IAAIC,YAAJ,EAAZ;AACA,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA,MAAMG,MAAM,GAAG,IAAIC,kBAAJ,EAAf;;AACA,MAAMC,GAAG,GAAGC,OAAO,CAAC,cAAD,CAAnB;;AAEAH,MAAM,CACJI,GADF,CACM,6BADN,EAEEC,GAFF,CAEM,GAFN,EAEW,CAACC,GAAD,EAAMC,IAAN,KAAe;AACxBD,EAAAA,GAAG,CAACE,IAAJ,GAAW,oCAAX;AACAF,EAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,CALF,EAMEJ,GANF,CAMM,iBANN,EAMyB,OAAOC,GAAP,EAAYC,IAAZ,KAAqB;AAE5C,QAAMG,aAAa,GAAG,MAAM,IAAIR,GAAJ,GAAUS,gBAAV,EAA5B;AACAL,EAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACAH,EAAAA,GAAG,CAACE,IAAJ,GAAWE,aAAX;AACA,CAXF,EAYEE,IAZF,CAYO,iBAZP,EAY0B,OAAON,GAAP,EAAYC,IAAZ,KAAqB;AAC7C,QAAMM,YAAY,GAAGP,GAAG,CAACQ,OAAJ,CAAYN,IAAjC;;AACA,MAAI;AACH,UAAMO,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAUc,kBAAV,CAA6BH,YAA7B,CAAvB;AACAP,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CAtBF,EAuBEJ,GAvBF,CAuBM,iCAvBN,EAuByC,OAAOC,GAAP,EAAYC,IAAZ,KAAqB;AAC5D,QAAMW,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;;AACA,MAAI;AACH,UAAML,YAAY,GAAG,MAAM,IAAIX,GAAJ,GAAUkB,eAAV,CAA0BF,cAA1B,CAA3B;AACAZ,IAAAA,GAAG,CAACE,IAAJ,GAAWK,YAAX;AACAP,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CAjCF,EAkCEY,GAlCF,CAkCM,iCAlCN,EAkCyC,OAAOf,GAAP,EAAYC,IAAZ,KAAqB;AAC5D,QAAMW,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;AACA,QAAMI,mBAAmB,GAAGhB,GAAG,CAACQ,OAAJ,CAAYN,IAAxC;;AACA,MAAI;AACH,UAAMK,YAAY,GAAG,MAAM,IAAIX,GAAJ,GAAUqB,kBAAV,CAA6BL,cAA7B,EAA6CI,mBAA7C,CAA3B;AACAhB,IAAAA,GAAG,CAACE,IAAJ,GAAWK,YAAX;AACAP,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CA7CF,EA8CEJ,GA9CF,CA8CM,wCA9CN,EA8CgD,OAAOC,GAAP,EAAYC,IAAZ,KAAqB;AACnE,QAAMW,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;;AACA,MAAI;AACH,UAAMM,MAAM,GAAG,MAAM,IAAItB,GAAJ,GAAUuB,wBAAV,CAAmCP,cAAnC,CAArB;AACAZ,IAAAA,GAAG,CAACE,IAAJ,GAAWgB,MAAX;AACAlB,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CAxDF,EAyDEG,IAzDF,CAyDO,wCAzDP,EAyDiD,OAAON,GAAP,EAAYC,IAAZ,KAAqB;AACpE,QAAMW,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;AACA,QAAMQ,QAAQ,GAAGpB,GAAG,CAACQ,OAAJ,CAAYN,IAA7B;;AACA,MAAI;AACH,UAAMO,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAUyB,4BAAV,CAAuCT,cAAvC,EAAuDQ,QAAvD,CAAvB;AACApB,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CApEF,EAqEEmB,GArEF,CAqEM,iDArEN,EAqEyD,OAAOtB,GAAP,EAAYC,IAAZ,KAAqB;AAC5E,QAAMW,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;AACA,QAAMW,SAAS,GAAGvB,GAAG,CAACa,MAAJ,CAAWW,OAA7B;;AACA,MAAI;AACH,UAAMf,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAU6B,6BAAV,CAAwCb,cAAxC,EAAwDW,SAAxD,CAAvB;AACAvB,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CAhFF,EAiFEJ,GAjFF,CAiFM,sBAjFN,EAiF8B,OAAOC,GAAP,EAAYC,IAAZ,KAAqB;AACjD,QAAMyB,SAAS,GAAG1B,GAAG,CAACa,MAAJ,CAAWa,SAA7B;;AACA,MAAI;AACH,UAAMjB,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAU+B,UAAV,CAAqBD,SAArB,CAAvB;AACA1B,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CA3FF,EA4FEY,GA5FF,CA4FM,6CA5FN,EA4FqD,OAAOf,GAAP,EAAYC,IAAZ,KAAqB;AACxE,QAAMyB,SAAS,GAAG1B,GAAG,CAACa,MAAJ,CAAWa,SAA7B;AACA,QAAMd,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;;AACA,MAAI;AACH,UAAMH,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAUgC,oBAAV,CAA+BF,SAA/B,EAA0Cd,cAA1C,CAAvB;AACAZ,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CAvGF,EAwGEmB,GAxGF,CAwGM,6CAxGN,EAwGqD,OAAOtB,GAAP,EAAYC,IAAZ,KAAqB;AACxE,QAAMyB,SAAS,GAAG1B,GAAG,CAACa,MAAJ,CAAWa,SAA7B;AACA,QAAMd,cAAc,GAAGZ,GAAG,CAACa,MAAJ,CAAWD,cAAlC;;AACA,MAAI;AACH,UAAMH,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAUiC,sBAAV,CAAiCH,SAAjC,EAA4Cd,cAA5C,CAAvB;AACAZ,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CAnHF,EAoHEJ,GApHF,CAoHM,6BApHN,EAoHqC,OAAOC,GAAP,EAAYC,IAAZ,KAAqB;AACxD,QAAMyB,SAAS,GAAG1B,GAAG,CAACa,MAAJ,CAAWa,SAA7B;;AACA,MAAI;AACH,UAAMjB,QAAQ,GAAG,MAAM,IAAIb,GAAJ,GAAUkC,yBAAV,CAAoCJ,SAApC,CAAvB;AACA1B,IAAAA,GAAG,CAACE,IAAJ,GAAWO,QAAX;AACAT,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,GAJD,CAIE,OAAOQ,GAAP,EAAY;AACbX,IAAAA,GAAG,CAACE,IAAJ,GAAWS,GAAX;AACAX,IAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA;AACD,CA9HF;AAiIA,MAAM4B,MAAM,GAAG1C,GAAG,CAChBS,GADa,CACTJ,MAAM,CAACsC,MAAP,EADS,EAEbC,MAFa,CAEN1C,IAFM,EAEA,MACb2C,OAAO,CAACC,GAAR,CAAa,4BAA2B5C,IAAK,EAA7C,CAHa,CAAf;AAMA6C,MAAM,CAACC,OAAP,GAAiBN,MAAjB",
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "sourcesContent": [
        "import Koa from 'koa';\nimport Router from 'koa-router';\nimport bodyParser from 'koa-bodyparser';\n\nconst app = new Koa();\nconst PORT = process.env.PORT || 1337;\nconst router = new Router();\nconst API = require('./controller');\n\nrouter\n\t.use(bodyParser())\n\t.get('/', (ctx, next) => {\n\t\tctx.body = 'Hello, welcome to the Polycade API';\n\t\tctx.status = 200;\n\t})\n\t.get('/pricing-models', async (ctx, next) => {\n\n\t\tconst pricingModels = await new API().getPricingModels();\n\t\tctx.status = 200;\n\t\tctx.body = pricingModels;\n\t})\n\t.post('/pricing-models', async (ctx, next) => {\n\t\tconst pricingModel = ctx.request.body;\n\t\ttry {\n\t\t\tconst response = await new API().createPricingModel(pricingModel);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 201;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 400;\n\t\t}\n\t})\n\t.get('/pricing-models/:pricingModelID', async (ctx, next) => {\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\ttry {\n\t\t\tconst pricingModel = await new API().getPricingModel(pricingModelID);\n\t\t\tctx.body = pricingModel;\n\t\t\tctx.status = 200;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 404;\n\t\t}\n\t})\n\t.put('/pricing-models/:pricingModelID', async (ctx, next) => {\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\tconst pricingModelChanges = ctx.request.body;\n\t\ttry {\n\t\t\tconst pricingModel = await new API().updatePricingModel(pricingModelID, pricingModelChanges);\n\t\t\tctx.body = pricingModel;\n\t\t\tctx.status = 202;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 400;\n\t\t}\n\t})\n\t.get('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\ttry {\n\t\t\tconst prices = await new API().getPricesForPricingModel(pricingModelID);\n\t\t\tctx.body = prices;\n\t\t\tctx.status = 200;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 404;\n\t\t}\n\t})\n\t.post('/pricing-models/:pricingModelID/prices', async (ctx, next) => {\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\tconst newPrice = ctx.request.body;\n\t\ttry {\n\t\t\tconst response = await new API().createPricingForPricingModel(pricingModelID, newPrice);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 201;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 400;\n\t\t}\n\t})\n\t.del('/pricing-models/:pricingModelID/prices/:priceID', async (ctx, next) => {\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\tconst pricingID = ctx.params.priceID;\n\t\ttry {\n\t\t\tconst response = await new API().deletePricingFromPricingModel(pricingModelID, pricingID);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 200;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 400;\n\t\t}\n\t})\n\t.get('/machines/:machineID', async (ctx, next) => {\n\t\tconst machineID = ctx.params.machineID;\n\t\ttry {\n\t\t\tconst response = await new API().getMachine(machineID);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 200;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 404;\n\t\t}\n\t})\n\t.put('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n\t\tconst machineID = ctx.params.machineID;\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\ttry {\n\t\t\tconst response = await new API().setPricingForMachine(machineID, pricingModelID);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 202;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 400;\n\t\t}\n\t})\n\t.del('/machines/:machineID/prices/:pricingModelID', async (ctx, next) => {\n\t\tconst machineID = ctx.params.machineID;\n\t\tconst pricingModelID = ctx.params.pricingModelID;\n\t\ttry {\n\t\t\tconst response = await new API().unsetPricingForMachine(machineID, pricingModelID);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 200;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 400;\n\t\t}\n\t})\n\t.get('/machines/:machineID/prices', async (ctx, next) => {\n\t\tconst machineID = ctx.params.machineID;\n\t\ttry {\n\t\t\tconst response = await new API().getPricingModelForMachine(machineID);\n\t\t\tctx.body = response;\n\t\t\tctx.status = 200;\n\t\t} catch (err) {\n\t\t\tctx.body = err;\n\t\t\tctx.status = 404;\n\t\t}\n\t});\n\n\nconst server = app\n\t.use(router.routes())\n\t.listen(PORT, () =>\n\t\tconsole.log(`Server listening on port ${PORT}`)\n\t);\n\nmodule.exports = server;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1635713543381
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/master/challenge-rest-api/src\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/master/challenge-rest-api\",\"filename\":\"/home/master/challenge-rest-api/src/controller.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/master/challenge-rest-api\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.16.0": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/master/challenge-rest-api",
      "filename": "/home/master/challenge-rest-api/src/controller.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/master/challenge-rest-api",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/master/challenge-rest-api/src/controller.js",
        "plugins": [
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/home/master/challenge-rest-api/src/controller.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/master/challenge-rest-api/src",
        "sourceFileName": "controller.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\n/* eslint-disable camelcase */\n\n/* eslint-disable radix */\n// controller.js\n// Logic behind the functionalities\nconst pricingData = require('./../prices.json');\n\nconst machineData = require('./../machines.json');\n\nconst fs = require('fs');\n\nclass Controller {\n  // getting all price models for the system\n  async getPricingModels() {\n    // return all todos\n    return new Promise((resolve, _) => resolve(pricingData));\n  } // getting an individual pricing model\n\n\n  async getPricingModel(pricingModelID) {\n    return new Promise((resolve, reject) => {\n      // get the pricing model\n      let pricingModel;\n\n      if (pricingModelID) {\n        pricingModel = pricingData[pricingModelID];\n      } else {\n        // no id so default pricing\n        pricingModel = pricingData.default_pricing;\n      }\n\n      if (pricingModel) {\n        // return the pricing model\n        resolve(pricingModel);\n      } else {\n        // return an error\n        reject(`Pricing Model with id ${pricingModelID} not found `);\n      }\n    });\n  } // getting prices for an individual pricing model\n\n\n  async getPricesForPricingModel(pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricing model\n      try {\n        let pricingModel = await this.getPricingModel(pricingModelID);\n        resolve(pricingModel.pricing);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // creating a pricing model in the system\n\n\n  async createPricingModel(pricingModel) {\n    return new Promise(async (resolve, reject) => {\n      // Ensure pricing model is complete\n      if (!pricingModel.name) {\n        reject('Missing parameters: name (str)');\n      } else if (!pricingModel.pricing) {\n        reject('Missing parameters: pricing (arr)');\n      } else if (!pricingModel.pricing[0]) {\n        reject('Please at least add one pricing object with the following keys: price (int), name (str), value (int)');\n      }\n\n      for (let [i, pricing] of pricingModel.pricing.entries()) {\n        if (!pricing.price) {\n          reject(`Found an error: price (int) is missing in your pricing object ${i}`);\n        } else if (!pricing.name) {\n          reject(`Found an error: name (str) is missing in your pricing object ${i}`);\n        } else if (!pricing.value) {\n          reject(`Found an error: value (int) is missing in your pricing object ${i}`);\n        }\n      }\n\n      let pricingModelID = Math.floor(4 + Math.random() * 10); // create a pricingModel, with random id and data sent\n\n      let newPricingModel = {\n        id: pricingModelID,\n        ...pricingModel\n      };\n      pricingData[pricingModelID] = newPricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8'); // return the new created todo\n\n        resolve(newPricingModel.id);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // adds a new price configuration for a pricing model\n\n\n  async createPricingForPricingModel(pricingModelID, newPrice) {\n    return new Promise(async (resolve, reject) => {\n      let pricingModel;\n\n      try {\n        pricingModel = await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      }\n\n      if (!newPrice.price) {\n        reject('Found an error: price (int) is missing in your pricing object');\n      } else if (!newPrice.name) {\n        reject('Found an error: name (str) is missing in your pricing object');\n      } else if (!newPrice.value) {\n        reject('Found an error: value (int) is missing in your pricing object');\n      }\n\n      let pricingID = Math.floor(4 + Math.random() * 10); // create a pricingModel, with random id and data sent\n\n      let newPricing = {\n        id: pricingID,\n        ...newPrice\n      }; // Add the pricing object to pricing model\n\n      pricingModel.pricing.push(newPricing);\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8'); // return the pricing model\n\n        await resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // updating a pricing model\n\n\n  async updatePricingModel(pricingModelID, pricingModelChanges) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      let pricingModel;\n\n      try {\n        pricingModel = await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      } // if no name, return an error\n\n\n      if (!pricingModelChanges.name) {\n        reject('Missing parameters: name (str)');\n      } // pricing model only contains name as meta data\n\n\n      pricingModel.name = pricingModelChanges.name;\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n        resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // removes a price configuration from a pricing model\n\n\n  async deletePricingFromPricingModel(pricingModelID, pricingID) {\n    return new Promise(async (resolve, reject) => {\n      // get the pricingModel\n      // get the pricingModel\n      let pricingModel;\n\n      try {\n        pricingModel = await this.getPricingModel(pricingModelID);\n      } catch (err) {\n        reject(err);\n      }\n\n      let pricingToBeDeleted = pricingModel.pricing.find(pricing => pricing.id === parseInt(pricingID));\n\n      if (!pricingToBeDeleted) {\n        reject(`No pricing with id ${pricingID} found in pricing model id ${pricingModelID}`);\n      }\n\n      let pricingArray = pricingModel.pricing.filter(item => item !== pricingToBeDeleted); // else, return a success message\n\n      pricingModel.pricing = pricingArray;\n      pricingData[pricingModelID] = pricingModel;\n\n      try {\n        await fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n        resolve(pricingModel);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // getting an individual pricing model\n\n\n  async getMachine(machineID) {\n    return new Promise((resolve, reject) => {\n      // get the pricing model\n      let machine = machineData[machineID];\n\n      if (machine) {\n        // return the machine\n        resolve(machine);\n      } else {\n        // return an error\n        reject(`Machine with id ${machineID} not found`);\n      }\n    });\n  } // sets/updates the pricing model for an individual machine\n\n\n  async setPricingForMachine(machineID, pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      let machine; // get the machine\n\n      try {\n        machine = await this.getMachine(machineID);\n      } catch (err) {\n        reject(err);\n      } // get the pricingModel\n\n\n      try {\n        await this.getPricingModel(pricingModelID); // does it exist???\n      } catch (err) {\n        reject(err);\n      } // else, update it by setting completed to true\n      // eslint-disable-next-line camelcase\n\n\n      machine.pricing_id = pricingModelID;\n      machineData[machineID] = machine;\n\n      try {\n        await fs.writeFileSync('./../machine.json', machineData, 'utf8');\n        resolve(machine);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // removes the pricing model from the machine (unsets it)\n\n\n  async unsetPricingForMachine(machineID, pricingModelID) {\n    return new Promise(async (resolve, reject) => {\n      let machine; // get the machine\n\n      try {\n        machine = await this.getMachine(machineID);\n      } catch (err) {\n        reject(err);\n      }\n\n      if (machine.pricing_id === pricingModelID) {\n        machine.pricing_id = '';\n        resolve(machine);\n      } else {\n        reject(`No pricing model with id ${pricingModelID} found for machine with id ${machineID}`);\n      }\n\n      machineData[machineID] = machine;\n\n      try {\n        await fs.writeFileSync('./../machine.json', machineData, 'utf8');\n        resolve(machine);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  } // get the pricing model and price configurations set for a given machine\n\n\n  async getPricingModelForMachine(machineID) {\n    return new Promise(async (resolve, reject) => {\n      let machine; // get the machine\n\n      try {\n        machine = await this.getMachine(machineID);\n      } catch (err) {\n        reject(err);\n      }\n\n      let pricingModelID = machine.pricing_id;\n      let pricingModel;\n\n      if (!pricingModelID || pricingModelID === '') {\n        // default pricing\n        try {\n          pricingModel = await this.getPricingModel();\n        } catch (err) {\n          reject(err);\n        }\n      } else {\n        try {\n          pricingModel = await this.getPricingModel(pricingModelID);\n        } catch (err) {\n          reject(err);\n        }\n      } // return the pricing model\n\n\n      resolve(pricingModel);\n    });\n  }\n\n}\n\nmodule.exports = Controller;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsicHJpY2luZ0RhdGEiLCJyZXF1aXJlIiwibWFjaGluZURhdGEiLCJmcyIsIkNvbnRyb2xsZXIiLCJnZXRQcmljaW5nTW9kZWxzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJfIiwiZ2V0UHJpY2luZ01vZGVsIiwicHJpY2luZ01vZGVsSUQiLCJyZWplY3QiLCJwcmljaW5nTW9kZWwiLCJkZWZhdWx0X3ByaWNpbmciLCJnZXRQcmljZXNGb3JQcmljaW5nTW9kZWwiLCJwcmljaW5nIiwiZXJyIiwiY3JlYXRlUHJpY2luZ01vZGVsIiwibmFtZSIsImkiLCJlbnRyaWVzIiwicHJpY2UiLCJ2YWx1ZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm5ld1ByaWNpbmdNb2RlbCIsImlkIiwid3JpdGVGaWxlU3luYyIsImNyZWF0ZVByaWNpbmdGb3JQcmljaW5nTW9kZWwiLCJuZXdQcmljZSIsInByaWNpbmdJRCIsIm5ld1ByaWNpbmciLCJwdXNoIiwidXBkYXRlUHJpY2luZ01vZGVsIiwicHJpY2luZ01vZGVsQ2hhbmdlcyIsImRlbGV0ZVByaWNpbmdGcm9tUHJpY2luZ01vZGVsIiwicHJpY2luZ1RvQmVEZWxldGVkIiwiZmluZCIsInBhcnNlSW50IiwicHJpY2luZ0FycmF5IiwiZmlsdGVyIiwiaXRlbSIsImdldE1hY2hpbmUiLCJtYWNoaW5lSUQiLCJtYWNoaW5lIiwic2V0UHJpY2luZ0Zvck1hY2hpbmUiLCJwcmljaW5nX2lkIiwidW5zZXRQcmljaW5nRm9yTWFjaGluZSIsImdldFByaWNpbmdNb2RlbEZvck1hY2hpbmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGtCQUFELENBQTNCOztBQUNBLE1BQU1DLFdBQVcsR0FBR0QsT0FBTyxDQUFDLG9CQUFELENBQTNCOztBQUNBLE1BQU1FLEVBQUUsR0FBR0Ys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LEVBQVk7QUFDYkwsVUFBQUEsTUFBTSxDQUFDSyxHQUFELENBQU47QUFDQTtBQUNELE9BeEI2QyxDQXlCOUM7OztBQUNBVCxNQUFBQSxPQUFPLENBQUNLLFlBQUQsQ0FBUDtBQUNBLEtBM0JNLENBQVA7QUE0QkE7O0FBN1FlOztBQStRakJzQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIvQyxVQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS9tYXN0ZXIvY2hhbGxlbmdlLXJlc3QtYXBpL3NyYyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqL1xuLyogZXNsaW50LWRpc2FibGUgcmFkaXggKi9cbi8vIGNvbnRyb2xsZXIuanNcbi8vIExvZ2ljIGJlaGluZCB0aGUgZnVuY3Rpb25hbGl0aWVzXG5jb25zdCBwcmljaW5nRGF0YSA9IHJlcXVpcmUoJy4vLi4vcHJpY2VzLmpzb24nKTtcbmNvbnN0IG1hY2hpbmVEYXRhID0gcmVxdWlyZSgnLi8uLi9tYWNoaW5lcy5qc29uJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbmNsYXNzIENvbnRyb2xsZXIge1xuXHQvLyBnZXR0aW5nIGFsbCBwcmljZSBtb2RlbHMgZm9yIHRoZSBzeXN0ZW1cblx0YXN5bmMgZ2V0UHJpY2luZ01vZGVscyAoKSB7XG5cdFx0Ly8gcmV0dXJuIGFsbCB0b2Rvc1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgXykgPT4gcmVzb2x2ZShwcmljaW5nRGF0YSkpO1xuXHR9XG5cblx0Ly8gZ2V0dGluZyBhbiBpbmRpdmlkdWFsIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgZ2V0UHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWxJRCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHQvLyBnZXQgdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdGxldCBwcmljaW5nTW9kZWw7XG5cdFx0XHRpZiAocHJpY2luZ01vZGVsSUQpIHtcblx0XHRcdFx0cHJpY2luZ01vZGVsID0gcHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gbm8gaWQgc28gZGVmYXVsdCBwcmljaW5nXG5cdFx0XHRcdHByaWNpbmdNb2RlbCA9IHByaWNpbmdEYXRhLmRlZmF1bHRfcHJpY2luZztcblx0XHRcdH1cblx0XHRcdGlmIChwcmljaW5nTW9kZWwpIHtcblx0XHRcdFx0Ly8gcmV0dXJuIHRoZSBwcmljaW5nIG1vZGVsXG5cdFx0XHRcdHJlc29sdmUocHJpY2luZ01vZGVsKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHJldHVybiBhbiBlcnJvclxuXHRcdFx0XHRyZWplY3QoYFByaWNpbmcgTW9kZWwgd2l0aCBpZCAke3ByaWNpbmdNb2RlbElEfSBub3QgZm91bmQgYCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBnZXR0aW5nIHByaWNlcyBmb3IgYW4gaW5kaXZpZHVhbCBwcmljaW5nIG1vZGVsXG5cdGFzeW5jIGdldFByaWNlc0ZvclByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZyBtb2RlbFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bGV0IHByaWNpbmdNb2RlbCA9IGF3YWl0IHRoaXMuZ2V0UHJpY2luZ01vZGVsKHByaWNpbmdNb2RlbElEKTtcblx0XHRcdFx0cmVzb2x2ZShwcmljaW5nTW9kZWwucHJpY2luZyk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBjcmVhdGluZyBhIHByaWNpbmcgbW9kZWwgaW4gdGhlIHN5c3RlbVxuXHRhc3luYyBjcmVhdGVQcmljaW5nTW9kZWwgKHByaWNpbmdNb2RlbCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHQvLyBFbnN1cmUgcHJpY2luZyBtb2RlbCBpcyBjb21wbGV0ZVxuXHRcdFx0aWYgKCFwcmljaW5nTW9kZWwubmFtZSkge1xuXHRcdFx0XHRyZWplY3QoJ01pc3NpbmcgcGFyYW1ldGVyczogbmFtZSAoc3RyKScpO1xuXHRcdFx0fSBlbHNlIGlmICghcHJpY2luZ01vZGVsLnByaWNpbmcpIHtcblx0XHRcdFx0cmVqZWN0KCdNaXNzaW5nIHBhcmFtZXRlcnM6IHByaWNpbmcgKGFyciknKTtcblx0XHRcdH0gZWxzZSBpZiAoIXByaWNpbmdNb2RlbC5wcmljaW5nWzBdKSB7XG5cdFx0XHRcdHJlamVjdCgnUGxlYXNlIGF0IGxlYXN0IGFkZCBvbmUgcHJpY2luZyBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6IHByaWNlIChpbnQpLCBuYW1lIChzdHIpLCB2YWx1ZSAoaW50KScpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yIChsZXQgW2ksIHByaWNpbmddIG9mIHByaWNpbmdNb2RlbC5wcmljaW5nLmVudHJpZXMoKSkge1xuXHRcdFx0XHRpZiAoIXByaWNpbmcucHJpY2UpIHtcblx0XHRcdFx0XHRyZWplY3QoYEZvdW5kIGFuIGVycm9yOiBwcmljZSAoaW50KSBpcyBtaXNzaW5nIGluIHlvdXIgcHJpY2luZyBvYmplY3QgJHtpfWApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKCFwcmljaW5nLm5hbWUpIHtcblx0XHRcdFx0XHRyZWplY3QoYEZvdW5kIGFuIGVycm9yOiBuYW1lIChzdHIpIGlzIG1pc3NpbmcgaW4geW91ciBwcmljaW5nIG9iamVjdCAke2l9YCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoIXByaWNpbmcudmFsdWUpIHtcblx0XHRcdFx0XHRyZWplY3QoYEZvdW5kIGFuIGVycm9yOiB2YWx1ZSAoaW50KSBpcyBtaXNzaW5nIGluIHlvdXIgcHJpY2luZyBvYmplY3QgJHtpfWApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGxldCBwcmljaW5nTW9kZWxJRCA9IE1hdGguZmxvb3IoNCArIE1hdGgucmFuZG9tKCkgKiAxMCk7XG5cdFx0XHQvLyBjcmVhdGUgYSBwcmljaW5nTW9kZWwsIHdpdGggcmFuZG9tIGlkIGFuZCBkYXRhIHNlbnRcblx0XHRcdGxldCBuZXdQcmljaW5nTW9kZWwgPSB7XG5cdFx0XHRcdGlkOiBwcmljaW5nTW9kZWxJRCxcblx0XHRcdFx0Li4ucHJpY2luZ01vZGVsXG5cdFx0XHR9O1xuXHRcdFx0cHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdID0gbmV3UHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgZnMud3JpdGVGaWxlU3luYygnLi8uLi9wcmljZXMuanNvbicsIHByaWNpbmdEYXRhLCAndXRmOCcpO1xuXHRcdFx0XHQvLyByZXR1cm4gdGhlIG5ldyBjcmVhdGVkIHRvZG9cblx0XHRcdCAgICByZXNvbHZlKG5ld1ByaWNpbmdNb2RlbC5pZCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBhZGRzIGEgbmV3IHByaWNlIGNvbmZpZ3VyYXRpb24gZm9yIGEgcHJpY2luZyBtb2RlbFxuXHRhc3luYyBjcmVhdGVQcmljaW5nRm9yUHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWxJRCwgbmV3UHJpY2UpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxldCBwcmljaW5nTW9kZWw7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRwcmljaW5nTW9kZWwgPSBhd2FpdCB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIW5ld1ByaWNlLnByaWNlKSB7XG5cdFx0XHRcdHJlamVjdCgnRm91bmQgYW4gZXJyb3I6IHByaWNlIChpbnQpIGlzIG1pc3NpbmcgaW4geW91ciBwcmljaW5nIG9iamVjdCcpO1xuXHRcdFx0fSBlbHNlIGlmICghbmV3UHJpY2UubmFtZSkge1xuXHRcdFx0XHRyZWplY3QoJ0ZvdW5kIGFuIGVycm9yOiBuYW1lIChzdHIpIGlzIG1pc3NpbmcgaW4geW91ciBwcmljaW5nIG9iamVjdCcpO1xuXHRcdFx0fSBlbHNlIGlmICghbmV3UHJpY2UudmFsdWUpIHtcblx0XHRcdFx0cmVqZWN0KCdGb3VuZCBhbiBlcnJvcjogdmFsdWUgKGludCkgaXMgbWlzc2luZyBpbiB5b3VyIHByaWNpbmcgb2JqZWN0Jyk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHJpY2luZ0lEID0gTWF0aC5mbG9vcig0ICsgTWF0aC5yYW5kb20oKSAqIDEwKTtcblx0XHRcdC8vIGNyZWF0ZSBhIHByaWNpbmdNb2RlbCwgd2l0aCByYW5kb20gaWQgYW5kIGRhdGEgc2VudFxuXHRcdFx0bGV0IG5ld1ByaWNpbmcgPSB7XG5cdFx0XHRcdGlkOiBwcmljaW5nSUQsXG5cdFx0XHRcdC4uLm5ld1ByaWNlXG5cdFx0XHR9O1xuXHRcdFx0Ly8gQWRkIHRoZSBwcmljaW5nIG9iamVjdCB0byBwcmljaW5nIG1vZGVsXG5cdFx0XHRwcmljaW5nTW9kZWwucHJpY2luZy5wdXNoKG5ld1ByaWNpbmcpO1xuXHRcdFx0cHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdID0gcHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgZnMud3JpdGVGaWxlU3luYygnLi8uLi9wcmljZXMuanNvbicsIHByaWNpbmdEYXRhLCAndXRmOCcpO1xuXHRcdFx0XHQvLyByZXR1cm4gdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdCAgICBhd2FpdCByZXNvbHZlKHByaWNpbmdNb2RlbCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyB1cGRhdGluZyBhIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgdXBkYXRlUHJpY2luZ01vZGVsIChwcmljaW5nTW9kZWxJRCwgcHJpY2luZ01vZGVsQ2hhbmdlcykge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nTW9kZWxcblx0XHRcdGxldCBwcmljaW5nTW9kZWw7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRwcmljaW5nTW9kZWwgPSBhd2FpdCB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHQvLyBpZiBubyBuYW1lLCByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdGlmICghcHJpY2luZ01vZGVsQ2hhbmdlcy5uYW1lKSB7XG5cdFx0XHRcdHJlamVjdCgnTWlzc2luZyBwYXJhbWV0ZXJzOiBuYW1lIChzdHIpJyk7XG5cdFx0XHR9XG5cdFx0XHQvLyBwcmljaW5nIG1vZGVsIG9ubHkgY29udGFpbnMgbmFtZSBhcyBtZXRhIGRhdGFcblx0XHRcdHByaWNpbmdNb2RlbC5uYW1lID0gcHJpY2luZ01vZGVsQ2hhbmdlcy5uYW1lO1xuXHRcdFx0cHJpY2luZ0RhdGFbcHJpY2luZ01vZGVsSURdID0gcHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0YXdhaXQgZnMud3JpdGVGaWxlU3luYygnLi8uLi9wcmljZXMuanNvbicsIHByaWNpbmdEYXRhLCAndXRmOCcpO1xuXHRcdFx0XHRyZXNvbHZlKHByaWNpbmdNb2RlbCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyByZW1vdmVzIGEgcHJpY2UgY29uZmlndXJhdGlvbiBmcm9tIGEgcHJpY2luZyBtb2RlbFxuXHRhc3luYyBkZWxldGVQcmljaW5nRnJvbVByaWNpbmdNb2RlbCAocHJpY2luZ01vZGVsSUQsIHByaWNpbmdJRCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSggYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmljaW5nTW9kZWxcblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZ01vZGVsXG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cHJpY2luZ01vZGVsID0gYXdhaXQgdGhpcy5nZXRQcmljaW5nTW9kZWwocHJpY2luZ01vZGVsSUQpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IHByaWNpbmdUb0JlRGVsZXRlZCA9IHByaWNpbmdNb2RlbC5wcmljaW5nLmZpbmQoKHByaWNpbmcpID0+IHByaWNpbmcuaWQgPT09IHBhcnNlSW50KHByaWNpbmdJRCkpO1xuXHRcdFx0aWYgKCFwcmljaW5nVG9CZURlbGV0ZWQpIHtcblx0XHRcdFx0cmVqZWN0KGBObyBwcmljaW5nIHdpdGggaWQgJHtwcmljaW5nSUR9IGZvdW5kIGluIHByaWNpbmcgbW9kZWwgaWQgJHtwcmljaW5nTW9kZWxJRH1gKTtcblx0XHRcdH1cblx0XHRcdGxldCBwcmljaW5nQXJyYXkgPSBwcmljaW5nTW9kZWwucHJpY2luZy5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBwcmljaW5nVG9CZURlbGV0ZWQpO1xuXHRcdFx0Ly8gZWxzZSwgcmV0dXJuIGEgc3VjY2VzcyBtZXNzYWdlXG5cdFx0XHRwcmljaW5nTW9kZWwucHJpY2luZyA9IHByaWNpbmdBcnJheTtcblx0XHRcdHByaWNpbmdEYXRhW3ByaWNpbmdNb2RlbElEXSA9IHByaWNpbmdNb2RlbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vcHJpY2VzLmpzb24nLCBwcmljaW5nRGF0YSwgJ3V0ZjgnKTtcblx0XHRcdFx0cmVzb2x2ZShwcmljaW5nTW9kZWwpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gZ2V0dGluZyBhbiBpbmRpdmlkdWFsIHByaWNpbmcgbW9kZWxcblx0YXN5bmMgZ2V0TWFjaGluZSAobWFjaGluZUlEKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZyBtb2RlbFxuXHRcdFx0bGV0IG1hY2hpbmUgPSBtYWNoaW5lRGF0YVttYWNoaW5lSURdO1xuXHRcdFx0aWYgKG1hY2hpbmUpIHtcblx0XHRcdFx0Ly8gcmV0dXJuIHRoZSBtYWNoaW5lXG5cdFx0XHRcdHJlc29sdmUobWFjaGluZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyByZXR1cm4gYW4gZXJyb3Jcblx0XHRcdFx0cmVqZWN0KGBNYWNoaW5lIHdpdGggaWQgJHttYWNoaW5lSUR9IG5vdCBmb3VuZGApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gc2V0cy91cGRhdGVzIHRoZSBwcmljaW5nIG1vZGVsIGZvciBhbiBpbmRpdmlkdWFsIG1hY2hpbmVcblx0YXN5bmMgc2V0UHJpY2luZ0Zvck1hY2hpbmUgKG1hY2hpbmVJRCwgcHJpY2luZ01vZGVsSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblxuXHRcdFx0bGV0IG1hY2hpbmU7XG5cdFx0XHQvLyBnZXQgdGhlIG1hY2hpbmVcblx0XHRcdHRyeSB7XG5cdFx0XHRcdG1hY2hpbmUgPSBhd2FpdCB0aGlzLmdldE1hY2hpbmUobWFjaGluZUlEKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH1cblx0XHRcdC8vIGdldCB0aGUgcHJpY2luZ01vZGVsXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7IC8vIGRvZXMgaXQgZXhpc3Q/Pz9cblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdH1cblx0XHRcdC8vIGVsc2UsIHVwZGF0ZSBpdCBieSBzZXR0aW5nIGNvbXBsZXRlZCB0byB0cnVlXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG5cdFx0XHRtYWNoaW5lLnByaWNpbmdfaWQgPSBwcmljaW5nTW9kZWxJRDtcblx0XHRcdG1hY2hpbmVEYXRhW21hY2hpbmVJRF0gPSBtYWNoaW5lO1xuICAgICAgICAgICAgXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBmcy53cml0ZUZpbGVTeW5jKCcuLy4uL21hY2hpbmUuanNvbicsIG1hY2hpbmVEYXRhLCAndXRmOCcpO1xuXHRcdFx0XHRyZXNvbHZlKG1hY2hpbmUpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gcmVtb3ZlcyB0aGUgcHJpY2luZyBtb2RlbCBmcm9tIHRoZSBtYWNoaW5lICh1bnNldHMgaXQpXG5cdGFzeW5jIHVuc2V0UHJpY2luZ0Zvck1hY2hpbmUgKG1hY2hpbmVJRCwgcHJpY2luZ01vZGVsSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxldCBtYWNoaW5lO1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRtYWNoaW5lID0gYXdhaXQgdGhpcy5nZXRNYWNoaW5lKG1hY2hpbmVJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWFjaGluZS5wcmljaW5nX2lkID09PSBwcmljaW5nTW9kZWxJRCkge1xuXHRcdFx0XHRtYWNoaW5lLnByaWNpbmdfaWQgPSAnJztcblx0XHRcdFx0cmVzb2x2ZShtYWNoaW5lKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlamVjdChgTm8gcHJpY2luZyBtb2RlbCB3aXRoIGlkICR7cHJpY2luZ01vZGVsSUR9IGZvdW5kIGZvciBtYWNoaW5lIHdpdGggaWQgJHttYWNoaW5lSUR9YCk7XG5cdFx0XHR9XG5cdFx0XHRtYWNoaW5lRGF0YVttYWNoaW5lSURdID0gbWFjaGluZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoJy4vLi4vbWFjaGluZS5qc29uJywgbWFjaGluZURhdGEsICd1dGY4Jyk7XG5cdFx0XHRcdHJlc29sdmUobWFjaGluZSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0Ly8gZ2V0IHRoZSBwcmljaW5nIG1vZGVsIGFuZCBwcmljZSBjb25maWd1cmF0aW9ucyBzZXQgZm9yIGEgZ2l2ZW4gbWFjaGluZVxuXHRhc3luYyBnZXRQcmljaW5nTW9kZWxGb3JNYWNoaW5lIChtYWNoaW5lSUQpIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoIGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdGxldCBtYWNoaW5lO1xuXHRcdFx0Ly8gZ2V0IHRoZSBtYWNoaW5lXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRtYWNoaW5lID0gYXdhaXQgdGhpcy5nZXRNYWNoaW5lKG1hY2hpbmVJRCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsSUQgPSBtYWNoaW5lLnByaWNpbmdfaWQ7XG5cdFx0XHRsZXQgcHJpY2luZ01vZGVsO1xuXHRcdFx0aWYgKCFwcmljaW5nTW9kZWxJRCB8fCBwcmljaW5nTW9kZWxJRCA9PT0gJycpIHtcblx0XHRcdFx0Ly8gZGVmYXVsdCBwcmljaW5nXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cHJpY2luZ01vZGVsID0gYXdhaXQgdGhpcy5nZXRQcmljaW5nTW9kZWwoKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwcmljaW5nTW9kZWwgPSBhd2FpdCB0aGlzLmdldFByaWNpbmdNb2RlbChwcmljaW5nTW9kZWxJRCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyByZXR1cm4gdGhlIHByaWNpbmcgbW9kZWxcblx0XHRcdHJlc29sdmUocHJpY2luZ01vZGVsKTtcblx0XHR9KTtcblx0fVxufVxubW9kdWxlLmV4cG9ydHMgPSBDb250cm9sbGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "controller.js"
      ],
      "names": [
        "pricingData",
        "require",
        "machineData",
        "fs",
        "Controller",
        "getPricingModels",
        "Promise",
        "resolve",
        "_",
        "getPricingModel",
        "pricingModelID",
        "reject",
        "pricingModel",
        "default_pricing",
        "getPricesForPricingModel",
        "pricing",
        "err",
        "createPricingModel",
        "name",
        "i",
        "entries",
        "price",
        "value",
        "Math",
        "floor",
        "random",
        "newPricingModel",
        "id",
        "writeFileSync",
        "createPricingForPricingModel",
        "newPrice",
        "pricingID",
        "newPricing",
        "push",
        "updatePricingModel",
        "pricingModelChanges",
        "deletePricingFromPricingModel",
        "pricingToBeDeleted",
        "find",
        "parseInt",
        "pricingArray",
        "filter",
        "item",
        "getMachine",
        "machineID",
        "machine",
        "setPricingForMachine",
        "pricing_id",
        "unsetPricingForMachine",
        "getPricingModelForMachine",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;AACA;AACA;AACA;AACA,MAAMA,WAAW,GAAGC,OAAO,CAAC,kBAAD,CAA3B;;AACA,MAAMC,WAAW,GAAGD,OAAO,CAAC,oBAAD,CAA3B;;AACA,MAAME,EAAE,GAAGF,OAAO,CAAC,IAAD,CAAlB;;AAEA,MAAMG,UAAN,CAAiB;AAChB;AACsB,QAAhBC,gBAAgB,GAAI;AACzB;AACA,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,CAAV,KAAgBD,OAAO,CAACP,WAAD,CAAnC,CAAP;AACA,GALe,CAOhB;;;AACqB,QAAfS,eAAe,CAAEC,cAAF,EAAkB;AACtC,WAAO,IAAIJ,OAAJ,CAAY,CAACC,OAAD,EAAUI,MAAV,KAAqB;AACvC;AACA,UAAIC,YAAJ;;AACA,UAAIF,cAAJ,EAAoB;AACnBE,QAAAA,YAAY,GAAGZ,WAAW,CAACU,cAAD,CAA1B;AACA,OAFD,MAEO;AACN;AACAE,QAAAA,YAAY,GAAGZ,WAAW,CAACa,eAA3B;AACA;;AACD,UAAID,YAAJ,EAAkB;AACjB;AACAL,QAAAA,OAAO,CAACK,YAAD,CAAP;AACA,OAHD,MAGO;AACN;AACAD,QAAAA,MAAM,CAAE,yBAAwBD,cAAe,aAAzC,CAAN;AACA;AACD,KAhBM,CAAP;AAiBA,GA1Be,CA4BhB;;;AAC8B,QAAxBI,wBAAwB,CAAEJ,cAAF,EAAkB;AAC/C,WAAO,IAAIJ,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC9C;AACA,UAAI;AACH,YAAIC,YAAY,GAAG,MAAM,KAAKH,eAAL,CAAqBC,cAArB,CAAzB;AACAH,QAAAA,OAAO,CAACK,YAAY,CAACG,OAAd,CAAP;AACA,OAHD,CAGE,OAAOC,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KARM,CAAP;AASA,GAvCe,CAyChB;;;AACwB,QAAlBC,kBAAkB,CAAEL,YAAF,EAAgB;AACvC,WAAO,IAAIN,OAAJ,CAAY,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC7C;AACA,UAAI,CAACC,YAAY,CAACM,IAAlB,EAAwB;AACvBP,QAAAA,MAAM,CAAC,gCAAD,CAAN;AACA,OAFD,MAEO,IAAI,CAACC,YAAY,CAACG,OAAlB,EAA2B;AACjCJ,QAAAA,MAAM,CAAC,mCAAD,CAAN;AACA,OAFM,MAEA,IAAI,CAACC,YAAY,CAACG,OAAb,CAAqB,CAArB,CAAL,EAA8B;AACpCJ,QAAAA,MAAM,CAAC,sGAAD,CAAN;AACA;;AACD,WAAK,IAAI,CAACQ,CAAD,EAAIJ,OAAJ,CAAT,IAAyBH,YAAY,CAACG,OAAb,CAAqBK,OAArB,EAAzB,EAAyD;AACxD,YAAI,CAACL,OAAO,CAACM,KAAb,EAAoB;AACnBV,UAAAA,MAAM,CAAE,iEAAgEQ,CAAE,EAApE,CAAN;AACA,SAFD,MAEO,IAAI,CAACJ,OAAO,CAACG,IAAb,EAAmB;AACzBP,UAAAA,MAAM,CAAE,gEAA+DQ,CAAE,EAAnE,CAAN;AACA,SAFM,MAEA,IAAI,CAACJ,OAAO,CAACO,KAAb,EAAoB;AAC1BX,UAAAA,MAAM,CAAE,iEAAgEQ,CAAE,EAApE,CAAN;AACA;AACD;;AAED,UAAIT,cAAc,GAAGa,IAAI,CAACC,KAAL,CAAW,IAAID,IAAI,CAACE,MAAL,KAAgB,EAA/B,CAArB,CAnB6C,CAoB7C;;AACA,UAAIC,eAAe,GAAG;AACrBC,QAAAA,EAAE,EAAEjB,cADiB;AAErB,WAAGE;AAFkB,OAAtB;AAIAZ,MAAAA,WAAW,CAACU,cAAD,CAAX,GAA8BgB,eAA9B;;AACA,UAAI;AACH,cAAMvB,EAAE,CAACyB,aAAH,CAAiB,kBAAjB,EAAqC5B,WAArC,EAAkD,MAAlD,CAAN,CADG,CAEH;;AACGO,QAAAA,OAAO,CAACmB,eAAe,CAACC,EAAjB,CAAP;AACH,OAJD,CAIE,OAAOX,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KAjCM,CAAP;AAkCA,GA7Ee,CA+EhB;;;AACkC,QAA5Ba,4BAA4B,CAAEnB,cAAF,EAAkBoB,QAAlB,EAA4B;AAC7D,WAAO,IAAIxB,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC9C,UAAIC,YAAJ;;AACA,UAAI;AACHA,QAAAA,YAAY,GAAG,MAAM,KAAKH,eAAL,CAAqBC,cAArB,CAArB;AACA,OAFD,CAEE,OAAOM,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;;AACD,UAAI,CAACc,QAAQ,CAACT,KAAd,EAAqB;AACpBV,QAAAA,MAAM,CAAC,+DAAD,CAAN;AACA,OAFD,MAEO,IAAI,CAACmB,QAAQ,CAACZ,IAAd,EAAoB;AAC1BP,QAAAA,MAAM,CAAC,8DAAD,CAAN;AACA,OAFM,MAEA,IAAI,CAACmB,QAAQ,CAACR,KAAd,EAAqB;AAC3BX,QAAAA,MAAM,CAAC,+DAAD,CAAN;AACA;;AACD,UAAIoB,SAAS,GAAGR,IAAI,CAACC,KAAL,CAAW,IAAID,IAAI,CAACE,MAAL,KAAgB,EAA/B,CAAhB,CAd8C,CAe9C;;AACA,UAAIO,UAAU,GAAG;AAChBL,QAAAA,EAAE,EAAEI,SADY;AAEhB,WAAGD;AAFa,OAAjB,CAhB8C,CAoB9C;;AACAlB,MAAAA,YAAY,CAACG,OAAb,CAAqBkB,IAArB,CAA0BD,UAA1B;AACAhC,MAAAA,WAAW,CAACU,cAAD,CAAX,GAA8BE,YAA9B;;AACA,UAAI;AACH,cAAMT,EAAE,CAACyB,aAAH,CAAiB,kBAAjB,EAAqC5B,WAArC,EAAkD,MAAlD,CAAN,CADG,CAEH;;AACG,cAAMO,OAAO,CAACK,YAAD,CAAb;AACH,OAJD,CAIE,OAAOI,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KA9BM,CAAP;AA+BA,GAhHe,CAkHhB;;;AACwB,QAAlBkB,kBAAkB,CAAExB,cAAF,EAAkByB,mBAAlB,EAAuC;AAC9D,WAAO,IAAI7B,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC9C;AACA,UAAIC,YAAJ;;AACA,UAAI;AACHA,QAAAA,YAAY,GAAG,MAAM,KAAKH,eAAL,CAAqBC,cAArB,CAArB;AACA,OAFD,CAEE,OAAOM,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA,OAP6C,CAQ9C;;;AACA,UAAI,CAACmB,mBAAmB,CAACjB,IAAzB,EAA+B;AAC9BP,QAAAA,MAAM,CAAC,gCAAD,CAAN;AACA,OAX6C,CAY9C;;;AACAC,MAAAA,YAAY,CAACM,IAAb,GAAoBiB,mBAAmB,CAACjB,IAAxC;AACAlB,MAAAA,WAAW,CAACU,cAAD,CAAX,GAA8BE,YAA9B;;AACA,UAAI;AACH,cAAMT,EAAE,CAACyB,aAAH,CAAiB,kBAAjB,EAAqC5B,WAArC,EAAkD,MAAlD,CAAN;AACAO,QAAAA,OAAO,CAACK,YAAD,CAAP;AACA,OAHD,CAGE,OAAOI,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KArBM,CAAP;AAsBA,GA1Ie,CA4IhB;;;AACmC,QAA7BoB,6BAA6B,CAAE1B,cAAF,EAAkBqB,SAAlB,EAA6B;AAC/D,WAAO,IAAIzB,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC9C;AACA;AACA,UAAIC,YAAJ;;AACA,UAAI;AACHA,QAAAA,YAAY,GAAG,MAAM,KAAKH,eAAL,CAAqBC,cAArB,CAArB;AACA,OAFD,CAEE,OAAOM,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;;AACD,UAAIqB,kBAAkB,GAAGzB,YAAY,CAACG,OAAb,CAAqBuB,IAArB,CAA2BvB,OAAD,IAAaA,OAAO,CAACY,EAAR,KAAeY,QAAQ,CAACR,SAAD,CAA9D,CAAzB;;AACA,UAAI,CAACM,kBAAL,EAAyB;AACxB1B,QAAAA,MAAM,CAAE,sBAAqBoB,SAAU,8BAA6BrB,cAAe,EAA7E,CAAN;AACA;;AACD,UAAI8B,YAAY,GAAG5B,YAAY,CAACG,OAAb,CAAqB0B,MAArB,CAA4BC,IAAI,IAAIA,IAAI,KAAKL,kBAA7C,CAAnB,CAb8C,CAc9C;;AACAzB,MAAAA,YAAY,CAACG,OAAb,GAAuByB,YAAvB;AACAxC,MAAAA,WAAW,CAACU,cAAD,CAAX,GAA8BE,YAA9B;;AACA,UAAI;AACH,cAAMT,EAAE,CAACyB,aAAH,CAAiB,kBAAjB,EAAqC5B,WAArC,EAAkD,MAAlD,CAAN;AACAO,QAAAA,OAAO,CAACK,YAAD,CAAP;AACA,OAHD,CAGE,OAAOI,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KAvBM,CAAP;AAwBA,GAtKe,CAwKhB;;;AACgB,QAAV2B,UAAU,CAAEC,SAAF,EAAa;AAC5B,WAAO,IAAItC,OAAJ,CAAY,CAACC,OAAD,EAAUI,MAAV,KAAqB;AACvC;AACA,UAAIkC,OAAO,GAAG3C,WAAW,CAAC0C,SAAD,CAAzB;;AACA,UAAIC,OAAJ,EAAa;AACZ;AACAtC,QAAAA,OAAO,CAACsC,OAAD,CAAP;AACA,OAHD,MAGO;AACN;AACAlC,QAAAA,MAAM,CAAE,mBAAkBiC,SAAU,YAA9B,CAAN;AACA;AACD,KAVM,CAAP;AAWA,GArLe,CAuLhB;;;AAC0B,QAApBE,oBAAoB,CAAEF,SAAF,EAAalC,cAAb,EAA6B;AACtD,WAAO,IAAIJ,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAE9C,UAAIkC,OAAJ,CAF8C,CAG9C;;AACA,UAAI;AACHA,QAAAA,OAAO,GAAG,MAAM,KAAKF,UAAL,CAAgBC,SAAhB,CAAhB;AACA,OAFD,CAEE,OAAO5B,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA,OAR6C,CAS9C;;;AACA,UAAI;AACH,cAAM,KAAKP,eAAL,CAAqBC,cAArB,CAAN,CADG,CACyC;AAC5C,OAFD,CAEE,OAAOM,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA,OAd6C,CAe9C;AACA;;;AACA6B,MAAAA,OAAO,CAACE,UAAR,GAAqBrC,cAArB;AACAR,MAAAA,WAAW,CAAC0C,SAAD,CAAX,GAAyBC,OAAzB;;AAEA,UAAI;AACH,cAAM1C,EAAE,CAACyB,aAAH,CAAiB,mBAAjB,EAAsC1B,WAAtC,EAAmD,MAAnD,CAAN;AACAK,QAAAA,OAAO,CAACsC,OAAD,CAAP;AACA,OAHD,CAGE,OAAO7B,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KA1BM,CAAP;AA2BA,GApNe,CAsNhB;;;AAC4B,QAAtBgC,sBAAsB,CAAEJ,SAAF,EAAalC,cAAb,EAA6B;AACxD,WAAO,IAAIJ,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC9C,UAAIkC,OAAJ,CAD8C,CAE9C;;AACA,UAAI;AACHA,QAAAA,OAAO,GAAG,MAAM,KAAKF,UAAL,CAAgBC,SAAhB,CAAhB;AACA,OAFD,CAEE,OAAO5B,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;;AACD,UAAI6B,OAAO,CAACE,UAAR,KAAuBrC,cAA3B,EAA2C;AAC1CmC,QAAAA,OAAO,CAACE,UAAR,GAAqB,EAArB;AACAxC,QAAAA,OAAO,CAACsC,OAAD,CAAP;AACA,OAHD,MAGO;AACNlC,QAAAA,MAAM,CAAE,4BAA2BD,cAAe,8BAA6BkC,SAAU,EAAnF,CAAN;AACA;;AACD1C,MAAAA,WAAW,CAAC0C,SAAD,CAAX,GAAyBC,OAAzB;;AACA,UAAI;AACH,cAAM1C,EAAE,CAACyB,aAAH,CAAiB,mBAAjB,EAAsC1B,WAAtC,EAAmD,MAAnD,CAAN;AACAK,QAAAA,OAAO,CAACsC,OAAD,CAAP;AACA,OAHD,CAGE,OAAO7B,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,KArBM,CAAP;AAsBA,GA9Oe,CA+OhB;;;AAC+B,QAAzBiC,yBAAyB,CAAEL,SAAF,EAAa;AAC3C,WAAO,IAAItC,OAAJ,CAAa,OAAOC,OAAP,EAAgBI,MAAhB,KAA2B;AAC9C,UAAIkC,OAAJ,CAD8C,CAE9C;;AACA,UAAI;AACHA,QAAAA,OAAO,GAAG,MAAM,KAAKF,UAAL,CAAgBC,SAAhB,CAAhB;AACA,OAFD,CAEE,OAAO5B,GAAP,EAAY;AACbL,QAAAA,MAAM,CAACK,GAAD,CAAN;AACA;;AACD,UAAIN,cAAc,GAAGmC,OAAO,CAACE,UAA7B;AACA,UAAInC,YAAJ;;AACA,UAAI,CAACF,cAAD,IAAmBA,cAAc,KAAK,EAA1C,EAA8C;AAC7C;AACA,YAAI;AACHE,UAAAA,YAAY,GAAG,MAAM,KAAKH,eAAL,EAArB;AACA,SAFD,CAEE,OAAOO,GAAP,EAAY;AACbL,UAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AAED,OARD,MAQO;AACN,YAAI;AACHJ,UAAAA,YAAY,GAAG,MAAM,KAAKH,eAAL,CAAqBC,cAArB,CAArB;AACA,SAFD,CAEE,OAAOM,GAAP,EAAY;AACbL,UAAAA,MAAM,CAACK,GAAD,CAAN;AACA;AACD,OAxB6C,CAyB9C;;;AACAT,MAAAA,OAAO,CAACK,YAAD,CAAP;AACA,KA3BM,CAAP;AA4BA;;AA7Qe;;AA+QjBsC,MAAM,CAACC,OAAP,GAAiB/C,UAAjB",
      "sourceRoot": "/home/master/challenge-rest-api/src",
      "sourcesContent": [
        "/* eslint-disable camelcase */\n/* eslint-disable radix */\n// controller.js\n// Logic behind the functionalities\nconst pricingData = require('./../prices.json');\nconst machineData = require('./../machines.json');\nconst fs = require('fs');\n\nclass Controller {\n\t// getting all price models for the system\n\tasync getPricingModels () {\n\t\t// return all todos\n\t\treturn new Promise((resolve, _) => resolve(pricingData));\n\t}\n\n\t// getting an individual pricing model\n\tasync getPricingModel (pricingModelID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\tlet pricingModel;\n\t\t\tif (pricingModelID) {\n\t\t\t\tpricingModel = pricingData[pricingModelID];\n\t\t\t} else {\n\t\t\t\t// no id so default pricing\n\t\t\t\tpricingModel = pricingData.default_pricing;\n\t\t\t}\n\t\t\tif (pricingModel) {\n\t\t\t\t// return the pricing model\n\t\t\t\tresolve(pricingModel);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Pricing Model with id ${pricingModelID} not found `);\n\t\t\t}\n\t\t});\n\t}\n\n\t// getting prices for an individual pricing model\n\tasync getPricesForPricingModel (pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\ttry {\n\t\t\t\tlet pricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t\tresolve(pricingModel.pricing);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// creating a pricing model in the system\n\tasync createPricingModel (pricingModel) {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\t// Ensure pricing model is complete\n\t\t\tif (!pricingModel.name) {\n\t\t\t\treject('Missing parameters: name (str)');\n\t\t\t} else if (!pricingModel.pricing) {\n\t\t\t\treject('Missing parameters: pricing (arr)');\n\t\t\t} else if (!pricingModel.pricing[0]) {\n\t\t\t\treject('Please at least add one pricing object with the following keys: price (int), name (str), value (int)');\n\t\t\t}\n\t\t\tfor (let [i, pricing] of pricingModel.pricing.entries()) {\n\t\t\t\tif (!pricing.price) {\n\t\t\t\t\treject(`Found an error: price (int) is missing in your pricing object ${i}`);\n\t\t\t\t} else if (!pricing.name) {\n\t\t\t\t\treject(`Found an error: name (str) is missing in your pricing object ${i}`);\n\t\t\t\t} else if (!pricing.value) {\n\t\t\t\t\treject(`Found an error: value (int) is missing in your pricing object ${i}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet pricingModelID = Math.floor(4 + Math.random() * 10);\n\t\t\t// create a pricingModel, with random id and data sent\n\t\t\tlet newPricingModel = {\n\t\t\t\tid: pricingModelID,\n\t\t\t\t...pricingModel\n\t\t\t};\n\t\t\tpricingData[pricingModelID] = newPricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\t// return the new created todo\n\t\t\t    resolve(newPricingModel.id);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// adds a new price configuration for a pricing model\n\tasync createPricingForPricingModel (pricingModelID, newPrice) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet pricingModel;\n\t\t\ttry {\n\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tif (!newPrice.price) {\n\t\t\t\treject('Found an error: price (int) is missing in your pricing object');\n\t\t\t} else if (!newPrice.name) {\n\t\t\t\treject('Found an error: name (str) is missing in your pricing object');\n\t\t\t} else if (!newPrice.value) {\n\t\t\t\treject('Found an error: value (int) is missing in your pricing object');\n\t\t\t}\n\t\t\tlet pricingID = Math.floor(4 + Math.random() * 10);\n\t\t\t// create a pricingModel, with random id and data sent\n\t\t\tlet newPricing = {\n\t\t\t\tid: pricingID,\n\t\t\t\t...newPrice\n\t\t\t};\n\t\t\t// Add the pricing object to pricing model\n\t\t\tpricingModel.pricing.push(newPricing);\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\t// return the pricing model\n\t\t\t    await resolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// updating a pricing model\n\tasync updatePricingModel (pricingModelID, pricingModelChanges) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\tlet pricingModel;\n\t\t\ttry {\n\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\t// if no name, return an error\n\t\t\tif (!pricingModelChanges.name) {\n\t\t\t\treject('Missing parameters: name (str)');\n\t\t\t}\n\t\t\t// pricing model only contains name as meta data\n\t\t\tpricingModel.name = pricingModelChanges.name;\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\tresolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// removes a price configuration from a pricing model\n\tasync deletePricingFromPricingModel (pricingModelID, pricingID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\t// get the pricingModel\n\t\t\t// get the pricingModel\n\t\t\tlet pricingModel;\n\t\t\ttry {\n\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tlet pricingToBeDeleted = pricingModel.pricing.find((pricing) => pricing.id === parseInt(pricingID));\n\t\t\tif (!pricingToBeDeleted) {\n\t\t\t\treject(`No pricing with id ${pricingID} found in pricing model id ${pricingModelID}`);\n\t\t\t}\n\t\t\tlet pricingArray = pricingModel.pricing.filter(item => item !== pricingToBeDeleted);\n\t\t\t// else, return a success message\n\t\t\tpricingModel.pricing = pricingArray;\n\t\t\tpricingData[pricingModelID] = pricingModel;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../prices.json', pricingData, 'utf8');\n\t\t\t\tresolve(pricingModel);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// getting an individual pricing model\n\tasync getMachine (machineID) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// get the pricing model\n\t\t\tlet machine = machineData[machineID];\n\t\t\tif (machine) {\n\t\t\t\t// return the machine\n\t\t\t\tresolve(machine);\n\t\t\t} else {\n\t\t\t\t// return an error\n\t\t\t\treject(`Machine with id ${machineID} not found`);\n\t\t\t}\n\t\t});\n\t}\n\n\t// sets/updates the pricing model for an individual machine\n\tasync setPricingForMachine (machineID, pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\n\t\t\tlet machine;\n\t\t\t// get the machine\n\t\t\ttry {\n\t\t\t\tmachine = await this.getMachine(machineID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\t// get the pricingModel\n\t\t\ttry {\n\t\t\t\tawait this.getPricingModel(pricingModelID); // does it exist???\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\t// else, update it by setting completed to true\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tmachine.pricing_id = pricingModelID;\n\t\t\tmachineData[machineID] = machine;\n            \n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../machine.json', machineData, 'utf8');\n\t\t\t\tresolve(machine);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\t// removes the pricing model from the machine (unsets it)\n\tasync unsetPricingForMachine (machineID, pricingModelID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet machine;\n\t\t\t// get the machine\n\t\t\ttry {\n\t\t\t\tmachine = await this.getMachine(machineID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tif (machine.pricing_id === pricingModelID) {\n\t\t\t\tmachine.pricing_id = '';\n\t\t\t\tresolve(machine);\n\t\t\t} else {\n\t\t\t\treject(`No pricing model with id ${pricingModelID} found for machine with id ${machineID}`);\n\t\t\t}\n\t\t\tmachineData[machineID] = machine;\n\t\t\ttry {\n\t\t\t\tawait fs.writeFileSync('./../machine.json', machineData, 'utf8');\n\t\t\t\tresolve(machine);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\t// get the pricing model and price configurations set for a given machine\n\tasync getPricingModelForMachine (machineID) {\n\t\treturn new Promise( async (resolve, reject) => {\n\t\t\tlet machine;\n\t\t\t// get the machine\n\t\t\ttry {\n\t\t\t\tmachine = await this.getMachine(machineID);\n\t\t\t} catch (err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tlet pricingModelID = machine.pricing_id;\n\t\t\tlet pricingModel;\n\t\t\tif (!pricingModelID || pricingModelID === '') {\n\t\t\t\t// default pricing\n\t\t\t\ttry {\n\t\t\t\t\tpricingModel = await this.getPricingModel();\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tpricingModel = await this.getPricingModel(pricingModelID);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return the pricing model\n\t\t\tresolve(pricingModel);\n\t\t});\n\t}\n}\nmodule.exports = Controller;\n"
      ]
    },
    "sourceType": "script",
    "mtime": 1635714204517
  }
}